(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{6117:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return t(1013)}])},3067:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var i=t(5893);function l(e){let{children:s,isLoading:t=!1,props:l={},className:n="",flex:r=!0,full:a=!1,disabled:d=!1,onClick:c}=e;return(0,i.jsxs)("button",{onClick:c,className:"group relative justify-center rounded-md px-3 py-2 text-sm font-semibold text-white hover:opacity-75 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 disabled:opacity-75 "+(n.includes("bg-")?"":"bg-indigo-600 ")+(a?"w-full ":"")+(r?"flex ":"")+n,disabled:t||d,...l,children:[(0,i.jsxs)("svg",{className:"animate-spin h-5 w-5 mr-3"+(t?"":" hidden"),viewBox:"0 0 24 24",children:[(0,i.jsx)("circle",{className:"opacity-25 fill-indigo-600",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,i.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s]})}},8240:function(e,s,t){"use strict";t.d(s,{Z:function(){return b}});var i=t(5893),l=t(1259),n=t(5675),r=t.n(n),a={src:"/mcchub/_next/static/media/mccWhite.370122d3.svg",height:50,width:407,blurWidth:0,blurHeight:0},d={src:"/mcchub/_next/static/media/mccWhiteSmall.429d837c.svg",height:48,width:147,blurWidth:0,blurHeight:0},c=t(1664),o=t.n(c),h=t(1163),u=t(7294);function x(e){let{pages:s=[],rightPages:t=[]}=e,l=(0,h.useRouter)();t.length&&"Sign Out"==t[t.length-1][0]||t.push(["Sign Out","/?signout=true"]);let[n,c]=(0,u.useState)(!1);return(0,i.jsx)("div",{children:(0,i.jsxs)("nav",{className:"bg-gray-800",children:[(0,i.jsx)("div",{className:"mx-auto max-w-7xl px-2 sm:px-6 lg:px-8",children:(0,i.jsxs)("div",{className:"relative flex h-16 items-center justify-between",children:[(0,i.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center md:hidden",children:(0,i.jsxs)("button",{type:"button",className:"inline-flex items-center justify-center rounded-md p-2 text-gray-400 hover:bg-gray-700 hover:text-white focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white","aria-controls":"mobile-menu","aria-expanded":"false",onClick:()=>c(!n),children:[(0,i.jsx)("span",{className:"sr-only",children:"Open main menu"}),(0,i.jsx)("svg",{className:"h-6 w-6 "+(n?"hidden":"block"),fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})}),(0,i.jsx)("svg",{className:"h-6 w-6 "+(n?"block":"hidden"),fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})]})}),(0,i.jsxs)("div",{className:"flex flex-1 items-center justify-center md:items-stretch md:justify-start",children:[(0,i.jsx)("div",{className:"flex flex-shrink-0 items-center",children:(0,i.jsxs)(o(),{href:"/dashboard",children:[(0,i.jsx)(r(),{className:"block h-8 w-auto sm:hidden",priority:!0,src:d,alt:"MCC Small Logo"}),(0,i.jsx)(r(),{className:"hidden h-8 w-auto sm:block",priority:!0,src:a,alt:"MCC Logo"})]})}),(0,i.jsx)("div",{className:"hidden md:ml-6 md:block w-full",children:(0,i.jsxs)("div",{className:"flex",children:[s.map((e,s)=>{let[t,n]=e;return(0,i.jsx)(o(),{href:n,className:(l.pathname==n?"bg-gray-900 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white")+" rounded-md px-3 py-2 text-sm font-medium"+(0==s?" ml-0":" ml-2"),"aria-current":l.pathname==n?"page":void 0,children:t},s)}),(0,i.jsx)("div",{className:"flex-auto"}),t.map((e,s)=>{let[t,n]=e;return(0,i.jsx)(o(),{href:n,className:(l.pathname==n?"bg-gray-900 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white")+" rounded-md px-3 py-2 text-sm font-medium"+(0==s?" ml-0":" ml-2"),"aria-current":l.pathname==n?"page":void 0,children:t},s)})]})})]})]})}),(0,i.jsx)("div",{className:"md:hidden"+(n?"":" hidden"),id:"mobile-menu",children:(0,i.jsx)("div",{className:"space-y-1 px-2 pb-3 pt-2",children:[...s,...t].map((e,s)=>{let[t,n]=e;return(0,i.jsx)(o(),{href:n,className:(l.pathname==n?"bg-gray-900 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white")+" block rounded-md px-3 py-2 text-base font-medium","aria-current":l.pathname==n?"page":void 0,children:t},s)})})})]})})}var m=t(1481),p=t(1019),j=t(9008),f=t.n(j);function b(e){let{title:s,children:t,pages:n,rightPages:r}=e,[a,d]=(0,u.useState)(void 0),[c,o]=(0,u.useState)(""),j=(0,h.useRouter)();return(0,u.useEffect)(()=>{(0,l.Aj)(m.I,e=>{if(!e){j.push("/");return}d(e),(0,p.jM)((0,p.iH)(m.db,"role/".concat(e.uid)),e=>{o(e.val()),j.pathname.startsWith("/admin")&&"admin"!=e.val()&&j.push("/")},{onlyOnce:!0})})},[j]),(0,i.jsxs)("div",{children:[(0,i.jsx)(f(),{children:(0,i.jsx)("title",{lang:"en",children:s?"".concat(s," | MCC Hub"):"MCC Hub"},"title")}),(0,i.jsx)(x,{pages:n||("student"==c?[["Dashboard","/dashboard"]]:"teacher"==c||"parent"==c?[["Dashboard","/dashboard"],["Students","/students"],["Payments","/payments"]]:[["Dashboard","/admin"],["Users","/admin/users"],["Payments","/admin/payments"]]),rightPages:r||[["Profile","/profile"]],user:null==a?void 0:a.email}),(0,i.jsx)("main",{className:"p-3",children:(0,i.jsx)("div",{children:t})})]})}},1481:function(e,s,t){"use strict";t.d(s,{I:function(){return a},db:function(){return d}});var i=t(3977),l=t(1259),n=t(1019);let r=(0,i.ZF)({apiKey:"AIzaSyC02WuJ5btg2A6iTeGwYi0IDzGKziODv2k",authDomain:"mcc-registration-test.firebaseapp.com",databaseURL:"https://mcc-registration-test-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"mcc-registration-test",storageBucket:"mcc-registration-test.appspot.com",messagingSenderId:"927692212307",appId:"1:927692212307:web:e3cd12ba84a9720b4b9ea6"}),a=(0,l.v0)(r),d=(0,n.N8)(r)},1013:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return p}});var i=t(5893),l=t(3067),n=t(8240),r=t(1664),a=t.n(r),d=t(1481),c=t(1259),o=t(7294),h=t(1019),u=t(1163);let x=e=>{let{title:s,className:t,children:l}=e;return(0,i.jsxs)("div",{className:"rounded-lg overflow-hidden shadow-lg p-4 mb-4 "+(t||""),children:[(0,i.jsx)("div",{className:"font-bold text-xl mb-2",children:s}),(0,i.jsx)("div",{className:"text-gray-700 text-base",children:l})]})},m=e=>{let{title:s,children:t,splitInto:l,color:n}=e;return(0,i.jsxs)("div",{className:"".concat({1:"w-full",2:"w-1/2",3:"w-1/3"}[l]," ").concat({red:"bg-red-100",green:"bg-green-100",yellow:"bg-yellow-100",none:""}[n||"none"]," px-4 py-6"),children:[(0,i.jsx)("div",{className:"font-bold",children:s}),t]})};function p(){let[e,s]=(0,o.useState)(!1),[t,r]=(0,o.useState)(!1),[p,j]=(0,o.useState)(!1),[f,b]=(0,o.useState)(""),[g,v]=(0,o.useState)(0),[y,N]=(0,o.useState)([]),w=(0,u.useRouter)(),[C,k]=(0,o.useState)({});return(0,o.useEffect)(()=>{(0,c.Aj)(d.I,e=>{e&&!f&&(s(!e.emailVerified),(0,h.jM)((0,h.iH)(d.db,"role/"+e.uid),s=>{b(s.val()),"student"==s.val()?((0,h.jM)((0,h.iH)(d.db,"users/"+e.uid+"/nric"),e=>{e.exists()||r(!0)},{onlyOnce:!0}),(0,h.jM)((0,h.iH)(d.db,"users/"+e.uid+"/category"),e=>{e.exists()||j(!0)},{onlyOnce:!0})):"teacher"==s.val()||"parent"==s.val()?((0,h.jM)((0,h.iH)(d.db,"managedStudents/"+e.uid),e=>{e.exists()&&v(Object.keys(e.val()).length)},{onlyOnce:!0}),(0,h.jM)((0,h.iH)(d.db,"payments/"+e.uid),e=>{if(console.log("snapshot",e.val()),e.exists())for(let s in e.val())e.val()[s].approved&&k(t=>({...t,[e.val()[s].approved.status]:parseFloat(e.val()[s].amount)+t[e.val()[s].approved.status]||0}))},{onlyOnce:!0})):"admin"==s.val()&&w.push("/admin")},{onlyOnce:!0}))})}),(0,i.jsx)(n.Z,{title:"Dashboard",children:(0,i.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-between",children:[(0,i.jsxs)("div",{className:"w-full md:w-1/3 px-2",children:[(0,i.jsx)(x,{title:"To-do",children:(0,i.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,i.jsx)("div",{children:"string"==typeof y?y:y.map((e,s)=>(0,i.jsx)("div",{children:e},s))}),e?(0,i.jsx)(l.Z,{full:!0,onClick:()=>{d.I.currentUser&&(0,c.w$)(d.I.currentUser).then(()=>{N("Verification email sent.")}).catch(e=>{N(e.message)})},children:"Verify Your Email"}):null,t?(0,i.jsx)(a(),{href:"/profile/bind-nric/",children:(0,i.jsx)(l.Z,{full:!0,children:"Bind Your IC Number"})}):null,p?(0,i.jsx)(a(),{href:"/profile",children:(0,i.jsx)(l.Z,{full:!0,children:"Complete Your Profile"})}):null,e||t||p?null:(0,i.jsx)("div",{className:"text-green-500",children:"All done!"})]})}),["teacher","parent"].includes(f)?(0,i.jsxs)(x,{title:"Students",children:[(0,i.jsxs)("div",{children:[g," ",1==g?"student":"students"," "]}),0==g?(0,i.jsx)("div",{className:"text-red-500",children:"Remember to add students!"}):null,(0,i.jsx)(a(),{href:"/students",children:(0,i.jsx)(l.Z,{full:!0,children:"Add Students"})})]}):null,(0,i.jsx)(x,{title:"Announcements",children:"This is a description of my card. It can be multiple lines long."})]}),(0,i.jsx)("div",{className:"w-full md:w-1/3 px-2",children:(0,i.jsxs)(x,{title:"Your Payments",children:[(0,i.jsx)(x,{title:"You need to pay...",className:"",children:(0,i.jsx)("span",{className:"text-xl",children:g*parseFloat("15")})}),(0,i.jsx)("div",{className:"bg-white rounded-lg overflow-hidden shadow-lg text-center",children:(0,i.jsxs)("div",{className:"flex",children:[(0,i.jsx)(m,{title:"Accepted",splitInto:3,color:"green",children:C.accepted||0}),(0,i.jsx)(m,{title:"Pending",splitInto:3,color:"yellow",children:C.pending||0}),(0,i.jsx)(m,{title:"Rejected",splitInto:3,color:"red",children:C.rejected||0})]})})]})}),(0,i.jsxs)("div",{className:"w-full md:w-1/3 px-2",children:[(0,i.jsxs)(x,{title:"Important Links",children:["This is a description of my card. It can be multiple lines long.",(0,i.jsx)(a(),{href:"/guide",children:(0,i.jsxs)(l.Z,{full:!0,children:[(0,i.jsx)("div",{children:"Guide to use MCC Hub."})," ",(0,i.jsx)("div",{children:"This link actually works."})]})})]}),(0,i.jsxs)(x,{title:"Important Dates",children:["This is a description of my card. It can be multiple lines long.",(0,i.jsx)("div",{className:"container mx-auto",children:(0,i.jsxs)("table",{className:"table-auto w-full",children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{className:"text-left",children:"Date"}),(0,i.jsx)("th",{className:"text-left",children:"Event Name"})]})}),(0,i.jsxs)("tbody",{children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"border px-4 py-2",children:"April 20, 2023"}),(0,i.jsx)("td",{className:"border px-4 py-2",children:"MCC Registration Deadline"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"border px-4 py-2",children:"April 25, 2023"}),(0,i.jsx)("td",{className:"border px-4 py-2",children:"MCC"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"border px-4 py-2",children:"May 25, 2023"}),(0,i.jsx)("td",{className:"border px-4 py-2",children:"MCO Qualifying Rounds"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"border px-4 py-2",children:"June 25, 2023"}),(0,i.jsx)("td",{className:"border px-4 py-2",children:"MCO Training Camp and MCO"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"border px-4 py-2",children:"July 25, 2023"}),(0,i.jsx)("td",{className:"border px-4 py-2",children:"APIO"})]})]})]})})]})]})]})})}}},function(e){e.O(0,[627,18,15,774,888,179],function(){return e(e.s=6117)}),_N_E=e.O()}]);