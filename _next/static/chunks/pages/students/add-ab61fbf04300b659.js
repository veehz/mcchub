(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[717],{5414:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/students/add",function(){return n(3098)}])},3758:function(e,s,n){"use strict";n.d(s,{Z:function(){return r}});var t=n(5893);function r(e){let{title:s,hidden:n=!1,children:r,props:a}=e;return(0,t.jsxs)("div",{hidden:n,className:"space-y-2 rounded-md p-4 border-solid border-2 border-indigo-600",...a,children:[(0,t.jsx)("div",{className:"font-bold text-center text-xl",children:s}),r]})}},1454:function(e,s,n){"use strict";n.d(s,{Z:function(){return r}});var t=n(5893);function r(e){let{children:s,id:n,disabled:r=!1,hook:a={},value:i}=e;return(0,t.jsxs)("div",{className:"flex space-x-2 p-1 text-sm font-bold "+(r?" text-gray-400":""),children:[(0,t.jsx)("input",{disabled:r,type:"radio",id:n,...a,className:"inline-block",value:void 0===i?n:i}),(0,t.jsx)("label",{className:"inline-block w-full",htmlFor:n,children:s})]})}},3706:function(e,s,n){"use strict";n.d(s,{Z:function(){return r}});var t=n(5893);function r(e){let{title:s,children:n,errorMsg:r}=e;return(0,t.jsxs)("div",{className:"space-y-0",children:[(0,t.jsxs)("div",{className:"px-2 py-1",children:[s," ",(0,t.jsx)("span",{className:"text-sm text-red-500",children:r})]}),n]})}},3098:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return x}});var t=n(5893),r=n(8804),a=n(7312),i=n(7294),l=n(7536),d=n(5696),c=n(1019),u=n(1758),o=n(3706),h=n(1454),m=n(1163),p=n(3758),f=n(1365);function x(){var e,s;let{register:n,handleSubmit:x,setValue:b,formState:{errors:v},watch:y}=(0,l.cI)({defaultValues:{isMalaysian:"true"}}),[N,j]=(0,i.useState)(!0),[g,w]=(0,i.useState)(!1),k=y("isMalaysian","true"),[I,Z]=(0,i.useReducer)(f.I,{}),P={title:"Error.",icon:"error",children:"There was an error. Please contact us if problem persists.",hidden:!1,mainText:"OK",mainColors:"bg-red-600",mainOnClick:()=>{Z({hidden:!0})},secondaryShow:!1},_=(0,m.useRouter)(),C=async e=>{w(!0),j(!1);let s=e.nric?e.nric.trim():"",n=e.passport?e.passport.trim():"",t="true"===k?s:n;if("true"===k&&0===s.length){Z({...P,children:"Please enter your NRIC."}),w(!1),j(!0);return}if("false"===k&&0===n.length){Z({...P,children:"Please enter your passport number."}),w(!1),j(!0);return}(0,c.jM)((0,c.iH)(d.db,"nric/"+t+"/manager"),async e=>{if(e.val()){Z({...P,children:"NRIC/Passport Number is already taken. Please contact us if this is a mistake."}),w(!1);return}try{await (0,c.t8)((0,c.iH)(d.db,"managedStudents/"+d.I.currentUser.uid+"/"+t),!0),await (0,c.t8)((0,c.iH)(d.db,"nric/"+t+"/manager"),d.I.currentUser.uid),_.push("/students")}catch(e){Z({...P,children:"There was an error. Please contact us if problem persists."}),w(!1),j(!0)}},{onlyOnce:!0})};return(0,t.jsxs)(a.Z,{title:"Add Student",children:[(0,t.jsx)("div",{className:"flex min-h-full items-center justify-center px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"w-full space-y-8 max-w-md",children:[(0,t.jsx)("div",{children:(0,t.jsx)("h2",{className:"mt-6 text-center text-3xl font-bold tracking-tight text-gray-900",children:"Add Student"})}),(0,t.jsxs)("form",{className:"space-y-6 w-full",onSubmit:x(C),noValidate:!0,children:[(0,t.jsxs)(p.Z,{title:"Identification",children:[(0,t.jsxs)(o.Z,{children:[(0,t.jsx)(h.Z,{id:"malaysian",value:"true",hook:n("isMalaysian"),disabled:!N,children:"Malaysian"}),(0,t.jsx)(h.Z,{id:"nonmalaysian",value:"false",hook:n("isMalaysian"),disabled:!N,children:"Non-Malaysian"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:["true"===k?(0,u.Z)({hook:n("nric",{pattern:{value:/[0-9]{2}[0-1][0-9][0-3][0-9]-[0-1][0-9]-[0-9]{4}/,message:"Invalid NRIC format."}}),id:"nric",inputName:"NRIC",placeholder:"NRIC with dashes (e.g. 031231-14-1234)",disabled:!N,errorMsg:null==v?void 0:null===(e=v.nric)||void 0===e?void 0:e.message}):null,"false"===k?(0,u.Z)({hook:n("passport",{pattern:{value:/[A-Z0-9]{1,9}/,message:"Invalid Passport format. Passports should only contain uppercase letters and numbers. If this is not the case for your passport number, please contact us."}}),id:"nric",inputName:"Passport Number",placeholder:"Passport Number (e.g. A1234567)",disabled:!N,errorMsg:null==v?void 0:null===(s=v.passport)||void 0===s?void 0:s.message}):null]})]}),(0,t.jsx)(r.Z,{full:!0,props:{type:"submit"},isLoading:g,disabled:!N,children:"Add Student"})]})]})}),(0,f.Z)(I)]})}}},function(e){e.O(0,[627,257,414,536,634,888,774,179],function(){return e(e.s=5414)}),_N_E=e.O()}]);