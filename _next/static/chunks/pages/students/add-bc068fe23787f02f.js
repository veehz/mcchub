(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[717],{5414:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/students/add",function(){return a(3098)}])},3758:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});var n=a(5893);function t(e){let{title:s,hidden:a=!1,children:t,props:r}=e;return(0,n.jsxs)("div",{hidden:a,className:"space-y-2 rounded-md p-4 border-solid border-2 border-indigo-600",...r,children:[(0,n.jsx)("div",{className:"font-bold text-center text-xl",children:s}),t]})}},1454:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});var n=a(5893);function t(e){let{children:s,id:a,disabled:t=!1,hook:r={},value:i}=e;return(0,n.jsxs)("div",{className:"flex space-x-2 p-1 text-sm font-bold "+(t?" text-gray-400":""),children:[(0,n.jsx)("input",{disabled:t,type:"radio",id:a,...r,className:"inline-block",value:void 0===i?a:i}),(0,n.jsx)("label",{className:"inline-block w-full",htmlFor:a,children:s})]})}},3706:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});var n=a(5893);function t(e){let{title:s,children:a,errorMsg:t}=e;return(0,n.jsxs)("div",{className:"space-y-0",children:[(0,n.jsxs)("div",{className:"px-2 py-1",children:[s," ",(0,n.jsx)("span",{className:"text-sm text-red-500",children:t})]}),a]})}},432:function(e){"use strict";e.exports={nric:/[0-9]{2}[0-1][0-9][0-3][0-9]-[0-9]{2}-[0-9]{4}/,passport:/[A-Z0-9]{1,9}/,phone:/\+?[\d ]{1,6}[- ]?[\d ]{1,15}/,dob:/\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])/,email:/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/,amount:/\d+(\.\d{1,2})?/}},3098:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return v}});var n=a(5893),t=a(8804),r=a(7312),i=a(7294),l=a(7536),d=a(5696),c=a(1019),o=a(1758),u=a(3706),x=a(1454),p=a(1163),m=a(3758),h=a(1365),f=a(432),b=a.n(f);function v(){var e,s;let{register:a,handleSubmit:f,setValue:v,formState:{errors:y},watch:N}=(0,l.cI)({defaultValues:{isMalaysian:"true"}}),[j,g]=(0,i.useState)(!0),[w,k]=(0,i.useState)(!1),_=N("isMalaysian","true"),[I,Z]=(0,i.useReducer)(h.I,{}),P={title:"Error.",icon:"error",children:"There was an error. Please contact us if problem persists.",hidden:!1,mainText:"OK",mainColors:"bg-red-600",mainOnClick:()=>{Z({hidden:!0})},secondaryShow:!1},z=(0,p.useRouter)(),C=async e=>{k(!0),g(!1);let s=e.nric?e.nric.trim():"",a=e.passport?e.passport.trim():"",n="true"===_?s:a;if("true"===_&&0===s.length){Z({...P,children:"Please enter your NRIC."}),k(!1),g(!0);return}if("false"===_&&0===a.length){Z({...P,children:"Please enter your passport number."}),k(!1),g(!0);return}(0,c.jM)((0,c.iH)(d.db,"nric/"+n+"/manager"),async e=>{if(e.val()){Z({...P,children:"NRIC/Passport Number is already taken. Please contact us if this is a mistake."}),k(!1);return}try{await (0,c.t8)((0,c.iH)(d.db,"managedStudents/"+d.I.currentUser.uid+"/"+n),!0),await (0,c.t8)((0,c.iH)(d.db,"nric/"+n+"/manager"),d.I.currentUser.uid),z.push("/students")}catch(e){Z({...P,children:"There was an error. Please contact us if problem persists."}),k(!1),g(!0)}},{onlyOnce:!0})};return(0,n.jsxs)(r.Z,{title:"Add Student",children:[(0,n.jsx)("div",{className:"flex min-h-full items-center justify-center px-4 sm:px-6 lg:px-8",children:(0,n.jsxs)("div",{className:"w-full space-y-8 max-w-md",children:[(0,n.jsx)("div",{children:(0,n.jsx)("h2",{className:"mt-6 text-center text-3xl font-bold tracking-tight text-gray-900",children:"Add Student"})}),(0,n.jsxs)("form",{className:"space-y-6 w-full",onSubmit:f(C),noValidate:!0,children:[(0,n.jsxs)(m.Z,{title:"Identification",children:[(0,n.jsxs)(u.Z,{children:[(0,n.jsx)(x.Z,{id:"malaysian",value:"true",hook:a("isMalaysian"),disabled:!j,children:"Malaysian"}),(0,n.jsx)(x.Z,{id:"nonmalaysian",value:"false",hook:a("isMalaysian"),disabled:!j,children:"Non-Malaysian"})]}),(0,n.jsxs)("div",{className:"space-y-2",children:["true"===_?(0,o.Z)({hook:a("nric",{pattern:{value:b().nric,message:"Invalid NRIC format."}}),id:"nric",inputName:"NRIC",placeholder:"NRIC with dashes (e.g. 031231-14-1234)",disabled:!j,errorMsg:null==y?void 0:null===(e=y.nric)||void 0===e?void 0:e.message}):null,"false"===_?(0,o.Z)({hook:a("passport",{pattern:{value:b().passport,message:"Invalid Passport format. Passports should only contain uppercase letters and numbers. If this is not the case for your passport number, please contact us."}}),id:"nric",inputName:"Passport Number",placeholder:"Passport Number (e.g. A1234567)",disabled:!j,errorMsg:null==y?void 0:null===(s=y.passport)||void 0===s?void 0:s.message}):null]})]}),(0,n.jsx)(t.Z,{full:!0,props:{type:"submit"},isLoading:w,disabled:!j,children:"Add Student"})]})]})}),(0,h.Z)(I)]})}}},function(e){e.O(0,[627,257,414,536,634,888,774,179],function(){return e(e.s=5414)}),_N_E=e.O()}]);