(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[221],{1359:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/students/edit",function(){return i(2858)}])},3067:function(e,t,i){"use strict";i.d(t,{Z:function(){return r}});var s=i(5893);function r(e){let{children:t,isLoading:i=!1,props:r={},className:n="",flex:a=!0,full:l=!1,disabled:d=!1,onClick:o}=e;return(0,s.jsxs)("button",{onClick:o,className:"group relative justify-center rounded-md px-3 py-2 text-sm font-semibold text-white hover:opacity-75 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 disabled:opacity-75 "+(n.includes("bg-")?"":"bg-indigo-600 ")+(l?"w-full ":"")+(a?"flex ":"")+n,disabled:i||d,...r,children:[(0,s.jsxs)("svg",{className:"animate-spin h-5 w-5 mr-3"+(i?"":" hidden"),viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25 fill-indigo-600",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),t]})}},8240:function(e,t,i){"use strict";i.d(t,{Z:function(){return v}});var s=i(5893),r=i(1259),n=i(5675),a=i.n(n),l={src:"/mcchub/_next/static/media/mccWhite.370122d3.svg",height:50,width:407,blurWidth:0,blurHeight:0},d={src:"/mcchub/_next/static/media/mccWhiteSmall.429d837c.svg",height:48,width:147,blurWidth:0,blurHeight:0},o=i(1664),c=i.n(o),u=i(1163),h=i(7294);function m(e){let{pages:t=[],rightPages:i=[]}=e,r=(0,u.useRouter)();i.length&&"Sign Out"==i[i.length-1][0]||i.push(["Sign Out","/?signout=true"]);let[n,o]=(0,h.useState)(!1);return(0,s.jsx)("div",{children:(0,s.jsxs)("nav",{className:"bg-gray-800",children:[(0,s.jsx)("div",{className:"mx-auto max-w-7xl px-2 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"relative flex h-16 items-center justify-between",children:[(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center md:hidden",children:(0,s.jsxs)("button",{type:"button",className:"inline-flex items-center justify-center rounded-md p-2 text-gray-400 hover:bg-gray-700 hover:text-white focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white","aria-controls":"mobile-menu","aria-expanded":"false",onClick:()=>o(!n),children:[(0,s.jsx)("span",{className:"sr-only",children:"Open main menu"}),(0,s.jsx)("svg",{className:"h-6 w-6 "+(n?"hidden":"block"),fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})}),(0,s.jsx)("svg",{className:"h-6 w-6 "+(n?"block":"hidden"),fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})]})}),(0,s.jsxs)("div",{className:"flex flex-1 items-center justify-center md:items-stretch md:justify-start",children:[(0,s.jsx)("div",{className:"flex flex-shrink-0 items-center",children:(0,s.jsxs)(c(),{href:"/dashboard",children:[(0,s.jsx)(a(),{className:"block h-8 w-auto sm:hidden",priority:!0,src:d,alt:"MCC Small Logo"}),(0,s.jsx)(a(),{className:"hidden h-8 w-auto sm:block",priority:!0,src:l,alt:"MCC Logo"})]})}),(0,s.jsx)("div",{className:"hidden md:ml-6 md:block w-full",children:(0,s.jsxs)("div",{className:"flex",children:[t.map((e,t)=>{let[i,n]=e;return(0,s.jsx)(c(),{href:n,className:(r.pathname==n?"bg-gray-900 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white")+" rounded-md px-3 py-2 text-sm font-medium"+(0==t?" ml-0":" ml-2"),"aria-current":r.pathname==n?"page":void 0,children:i},t)}),(0,s.jsx)("div",{className:"flex-auto"}),i.map((e,t)=>{let[i,n]=e;return(0,s.jsx)(c(),{href:n,className:(r.pathname==n?"bg-gray-900 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white")+" rounded-md px-3 py-2 text-sm font-medium"+(0==t?" ml-0":" ml-2"),"aria-current":r.pathname==n?"page":void 0,children:i},t)})]})})]})]})}),(0,s.jsx)("div",{className:"md:hidden"+(n?"":" hidden"),id:"mobile-menu",children:(0,s.jsx)("div",{className:"space-y-1 px-2 pb-3 pt-2",children:[...t,...i].map((e,t)=>{let[i,n]=e;return(0,s.jsx)(c(),{href:n,className:(r.pathname==n?"bg-gray-900 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white")+" block rounded-md px-3 py-2 text-base font-medium","aria-current":r.pathname==n?"page":void 0,children:i},t)})})})]})})}var x=i(1481),f=i(1019),g=i(9008),p=i.n(g);function v(e){let{title:t,children:i,pages:n,rightPages:a}=e,[l,d]=(0,h.useState)(void 0),[o,c]=(0,h.useState)(""),g=(0,u.useRouter)();return(0,h.useEffect)(()=>{(0,r.Aj)(x.I,e=>{if(!e){g.push("/");return}d(e),(0,f.jM)((0,f.iH)(x.db,"role/".concat(e.uid)),e=>{c(e.val()),g.pathname.startsWith("/admin")&&"admin"!=e.val()&&g.push("/")},{onlyOnce:!0})})},[g]),(0,s.jsxs)("div",{children:[(0,s.jsx)(p(),{children:(0,s.jsx)("title",{lang:"en",children:t?"".concat(t," | MCC Hub"):"MCC Hub"},"title")}),(0,s.jsx)(m,{pages:n||("student"==o?[["Dashboard","/dashboard"]]:"teacher"==o||"parent"==o?[["Dashboard","/dashboard"],["Students","/students"],["Payments","/payments"]]:[["Dashboard","/admin"],["Users","/admin/users"],["Payments","/admin/payments"]]),rightPages:a||[["Profile","/profile"]],user:null==l?void 0:l.email}),(0,s.jsx)("main",{className:"p-3",children:(0,s.jsx)("div",{children:i})})]})}},4681:function(e,t,i){"use strict";i.d(t,{Z:function(){return r}});var s=i(5893);function r(e){let{title:t,hidden:i=!1,children:r,props:n}=e;return(0,s.jsxs)("div",{hidden:i,className:"space-y-2 rounded-md p-4 border-solid border-2 border-indigo-600",...n,children:[(0,s.jsx)("div",{className:"font-bold text-center text-xl",children:t}),r]})}},972:function(e,t,i){"use strict";i.d(t,{Z:function(){return r}});var s=i(5893);function r(e){let{children:t,id:i,disabled:r=!1,hook:n={},value:a}=e;return(0,s.jsxs)("div",{className:"flex space-x-2 p-1 text-sm font-bold "+(r?" text-gray-400":""),children:[(0,s.jsx)("input",{disabled:r,type:"radio",id:i,...n,className:"inline-block",value:void 0===a?i:a}),(0,s.jsx)("label",{className:"inline-block w-full",htmlFor:i,children:t})]})}},9954:function(e,t,i){"use strict";i.d(t,{Z:function(){return r}});var s=i(5893);function r(e){let{title:t,children:i,errorMsg:r}=e;return(0,s.jsxs)("div",{className:"space-y-0",children:[(0,s.jsxs)("div",{className:"px-2 py-1",children:[t," ",(0,s.jsx)("span",{className:"text-sm text-red-500",children:r})]}),i]})}},3188:function(e,t,i){"use strict";i.d(t,{Z:function(){return r}});var s=i(5893);function r(e){let{id:t,inputName:i,placeholder:r,hook:n,disabled:a=!1,errorMsg:l,props:d}=e;return(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsx)("div",{className:"px-2 py-1",children:(0,s.jsx)("label",{htmlFor:t,children:void 0===i?r:i||null})}),(0,s.jsx)("input",{type:"text",className:"rounded-md relative block w-full border-0 py-1.5 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:z-10 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 disabled:opacity-75 disabled:bg-slate-100"+(l?" ring-red-500":""),disabled:a,id:t,placeholder:r,...d,...n}),(0,s.jsx)("div",{className:"px-2 py-1",children:(0,s.jsx)("div",{className:"text-sm text-red-500",children:l})})]})}},1481:function(e,t,i){"use strict";i.d(t,{I:function(){return l},db:function(){return d}});var s=i(3977),r=i(1259),n=i(1019);let a=(0,s.ZF)({apiKey:"AIzaSyC02WuJ5btg2A6iTeGwYi0IDzGKziODv2k",authDomain:"mcc-registration-test.firebaseapp.com",databaseURL:"https://mcc-registration-test-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"mcc-registration-test",storageBucket:"mcc-registration-test.appspot.com",messagingSenderId:"927692212307",appId:"1:927692212307:web:e3cd12ba84a9720b4b9ea6"}),l=(0,r.v0)(a),d=(0,n.N8)(a)},2858:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return g}});var s=i(5893),r=i(3067),n=i(8240),a=i(7294),l=i(7536),d=i(1481),o=i(1019),c=i(1259),u=i(3188),h=i(9954),m=i(972),x=i(1163),f=i(4681);function g(){var e,t,i,g,p,v,b;let j=(0,x.useRouter)(),{register:y,formState:{errors:N},handleSubmit:k,setValue:w}=(0,l.cI)(),[S,M]=(0,a.useState)(!1),[C,Z]=(0,a.useState)(!1),[P,I]=(0,a.useState)(""),[_,F]=(0,a.useState)(""),[L,H]=(0,a.useState)(""),[O,W]=(0,a.useState)({}),A=e=>{Z(!0),M(!1);let t={};for(let i in e){if("nric"==i)continue;let s=i;(e[s]||"")!==(O[s]||"")&&(t[i]=e[s]?e[s]:"")}(0,o.Vx)((0,o.iU)((0,o.iH)(d.db),"users/"+P),t).then(()=>{Z(!1),M(!0),H("Profile updated successfully.")}).catch(e=>{console.log(e),Z(!1),M(!0),H("An error occurred. Please try again later.")})},[D,E]=(0,a.useState)(!1);(0,c.Aj)(d.I,async e=>{if(e){let{id:e}=j.query;e&&(D||(E(!0),F(e),(0,o.jM)((0,o.iH)(d.db,"nric/".concat(e,"/student")),t=>{console.log("nric/".concat(e));let i=t.val();I(i),(0,o.jM)((0,o.iU)((0,o.iH)(d.db),"users/"+i),e=>{for(let s in W(e.val()),console.log(e.val()),e.val()){var t,i;if(!["name","form","gender","state","country","category","school"].includes(s))continue;let r=s;t=s,(i=e.val()[r])&&(console.log(t,i),w(t,i))}M(!0)},{onlyOnce:!0})},{onlyOnce:!0})))}});let U=e=>{let{hook:t,id:i,inputName:r,placeholder:n,children:a,disabled:l,errorMsg:d}=e;return(0,s.jsx)(u.Z,{hook:t,id:i,inputName:r,placeholder:n,disabled:!S,errorMsg:d,children:a})};return(0,s.jsx)(n.Z,{title:"Edit Student Profile",children:(0,s.jsx)("div",{className:"flex min-h-full items-center justify-center px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"w-full space-y-8 max-w-md",children:[(0,s.jsx)("div",{children:(0,s.jsx)("h2",{className:"mt-6 text-center text-3xl font-bold tracking-tight text-gray-900",children:"Student Profile"})}),(0,s.jsx)("div",{children:L}),(0,s.jsx)("form",{className:"mt-8 space-y-6 w-full",onSubmit:k(A),noValidate:!0,children:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(f.Z,{title:"Identification",children:U({id:"nric",inputName:"NRIC/Passport Number",placeholder:_,disabled:!0})}),(0,s.jsxs)(f.Z,{title:"Personal Information",children:[U({hook:y("name",{required:"Full name is required."}),id:"name",placeholder:"Full Name",errorMsg:null==N?void 0:null===(e=N.name)||void 0===e?void 0:e.message}),(0,s.jsxs)(h.Z,{title:"Gender",errorMsg:null==N?void 0:null===(t=N.gender)||void 0===t?void 0:t.message,children:[(0,s.jsx)(m.Z,{id:"male",hook:y("gender"),disabled:!S,children:"Male"}),(0,s.jsx)(m.Z,{id:"female",hook:y("gender"),disabled:!S,children:"Female"}),(0,s.jsx)(m.Z,{id:"undisclosed",hook:y("gender"),disabled:!S,children:"Non-binary/Undisclosed"})]})]}),(0,s.jsxs)(f.Z,{title:"Student Information",children:[U({hook:y("school"),id:"school",placeholder:"School",errorMsg:null==N?void 0:null===(i=N.school)||void 0===i?void 0:i.message}),U({hook:y("form",{validate:e=>{if(!e||e.length<1)return"Please fill in your form/year."}}),id:"name",inputName:"Form/Year",placeholder:"Form/Year (e.g. Form 4, Standard 6)",errorMsg:null==N?void 0:null===(g=N.form)||void 0===g?void 0:g.message}),U({hook:y("state"),id:"state",inputName:"State",placeholder:"State (e.g. Kuala Lumpur)",errorMsg:null==N?void 0:null===(p=N.state)||void 0===p?void 0:p.message}),U({hook:y("country",{validate:e=>{if(!e||e.length<1)return"Please fill in your country."}}),id:"country",inputName:"Country",placeholder:"Country (e.g. Malaysia)",errorMsg:null==N?void 0:null===(v=N.country)||void 0===v?void 0:v.message}),(0,s.jsxs)(h.Z,{title:"Category",errorMsg:null==N?void 0:null===(b=N.category)||void 0===b?void 0:b.message,children:[(0,s.jsx)(m.Z,{id:"junior",hook:y("category",{validate:e=>{if(!e||e.length<1)return"Please select a category."}}),disabled:!S,children:"Bongsu/Junior - Form 1, 2, 3, or Primary School"}),(0,s.jsx)(m.Z,{id:"intermediate",hook:y("category"),disabled:!S,children:"Muda/Intermediate - Form 4, 5"}),(0,s.jsx)(m.Z,{id:"senior",hook:y("category"),disabled:!S,children:"Sulung/Senior - Form 6 (lower & upper), Pre-U (Matriculation, Foundation Studies, IB, A-Levels, etc.)"})]})]}),(0,s.jsx)(r.Z,{props:{type:"submit"},isLoading:C,full:!0,children:"Update Details"})]})})]})})})}}},function(e){e.O(0,[627,18,15,536,774,888,179],function(){return e(e.s=1359)}),_N_E=e.O()}]);