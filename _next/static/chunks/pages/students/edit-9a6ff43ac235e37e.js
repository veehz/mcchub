(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[221],{1359:function(e,l,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/students/edit",function(){return t(9613)}])},8945:function(e,l,t){"use strict";t.d(l,{Z:function(){return i}});var r=t(5893);function i(e){let{id:l,inputName:t,placeholder:i,hook:n,disabled:s=!1,errorMsg:a,props:o}=e;return(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsx)("div",{className:"px-2 py-1",children:(0,r.jsx)("label",{htmlFor:l,children:void 0===t?i:t||null})}),(0,r.jsx)("input",{type:"date",className:"rounded-md relative block w-full border-0 py-1.5 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:z-10 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 disabled:opacity-75 disabled:bg-slate-100"+(a?" ring-red-500":""),disabled:s,id:l,placeholder:i,...o,...n}),(0,r.jsx)("div",{className:"px-2 py-1",children:(0,r.jsx)("div",{className:"text-sm text-red-500",children:a})})]})}t(7294)},3758:function(e,l,t){"use strict";t.d(l,{Z:function(){return i}});var r=t(5893);function i(e){let{title:l,hidden:t=!1,children:i,props:n}=e;return(0,r.jsxs)("div",{hidden:t,className:"space-y-2 rounded-md p-4 border-solid border-2 border-indigo-600",...n,children:[(0,r.jsx)("div",{className:"font-bold text-center text-xl",children:l}),i]})}},1454:function(e,l,t){"use strict";t.d(l,{Z:function(){return i}});var r=t(5893);function i(e){let{children:l,id:t,disabled:i=!1,hook:n={},value:s}=e;return(0,r.jsxs)("div",{className:"flex space-x-2 p-1 text-sm font-bold "+(i?" text-gray-400":""),children:[(0,r.jsx)("input",{disabled:i,type:"radio",id:t,...n,className:"inline-block",value:void 0===s?t:s}),(0,r.jsx)("label",{className:"inline-block w-full",htmlFor:t,children:l})]})}},3706:function(e,l,t){"use strict";t.d(l,{Z:function(){return i}});var r=t(5893);function i(e){let{title:l,children:t,errorMsg:i}=e;return(0,r.jsxs)("div",{className:"space-y-0",children:[(0,r.jsxs)("div",{className:"px-2 py-1",children:[l," ",(0,r.jsx)("span",{className:"text-sm text-red-500",children:i})]}),t]})}},9613:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return y}});var r=t(5893),i=t(8804),n=t(7312),s=t(7294),a=t(7536),o=t(5696),d=t(1019),c=t(1259),u=t(1758),m=t(3706),h=t(1454),f=t(1163),x=t(3758),v=t(8945),p=t(8063),g=t.n(p);function y(){var e,l,t,p,y,j,b;let N=(0,f.useRouter)(),{register:k,formState:{errors:S},handleSubmit:w,setValue:Z}=(0,a.cI)(),[_,M]=(0,s.useState)(!1),[P,F]=(0,s.useState)(!1),[E,O]=(0,s.useState)(""),[C,D]=(0,s.useState)(""),[I,q]=(0,s.useState)(""),[B,H]=(0,s.useState)({}),[U,Y]=(0,s.useState)(!1);(0,c.Aj)(o.I,async e=>{if(e){let{id:e}=N.query;e&&(U||(Y(!0),D(e),(0,d.jM)((0,d.iH)(o.db,"nric/".concat(e,"/student")),e=>{let l=e.val();O(l),(0,d.jM)((0,d.iU)((0,d.iH)(o.db),"users/"+l),e=>{for(let l in H(e.val()),e.val())["name","form","gender","state","country","category","school"].includes(l)&&Z(l,e.val()[l]);M(!0)},{onlyOnce:!0})},{onlyOnce:!0})))}});let A=e=>{let{hook:l,id:t,inputName:i,placeholder:n,children:s,disabled:a,errorMsg:o}=e;return(0,r.jsx)(u.Z,{hook:l,id:t,inputName:i,placeholder:n,disabled:!_,errorMsg:o,children:s})},L=g().genders;return(0,r.jsx)(n.Z,{title:"Profile",children:(0,r.jsx)("div",{className:"flex min-h-full items-center justify-center px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"w-full space-y-8 max-w-md",children:[(0,r.jsx)("div",{children:(0,r.jsx)("h2",{className:"mt-6 text-center text-3xl font-bold tracking-tight text-gray-900",children:"Your Profile"})}),(0,r.jsx)("form",{className:"mt-8 space-y-6 w-full",onSubmit:w(e=>{F(!0),M(!1);let l={};for(let t in e)"nric"!=t&&(e[t]||"")!==(B[t]||"")&&(l[t]=e[t]?e[t]:"");(0,d.Vx)((0,d.iU)((0,d.iH)(o.db),"users/"+E),l).then(()=>{F(!1),M(!0),q("Profile updated successfully.")}).catch(e=>{F(!1),M(!0),q("An error occurred. Please try again later.")})}),noValidate:!0,children:(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)(x.Z,{title:"Personal Information",children:[A({hook:k("name",{required:"Full name is required."}),id:"name",placeholder:"Full Name",errorMsg:null==S?void 0:null===(e=S.name)||void 0===e?void 0:e.message}),(0,r.jsx)(m.Z,{title:"Gender",errorMsg:null==S?void 0:null===(l=S.gender)||void 0===l?void 0:l.message,children:Object.keys(L).map(e=>(0,r.jsx)(h.Z,{id:e,hook:k("gender"),disabled:!_,children:L[e]},e))})]}),(0,r.jsxs)(x.Z,{title:"Student Information",children:[A({hook:k("school"),id:"school",placeholder:"School",errorMsg:null==S?void 0:null===(t=S.school)||void 0===t?void 0:t.message}),(0,r.jsx)(v.Z,{hook:k("dob",{validate:e=>{if(!e||e.length<1)return"Please fill in your Date of Birth."}}),id:"dob",inputName:"Date of Birth",placeholder:"Date of Birth",errorMsg:null==S?void 0:null===(p=S.dob)||void 0===p?void 0:p.message}),A({hook:k("form",{validate:e=>{if(!e||e.length<1)return"Please fill in your form/year."}}),id:"name",inputName:"Form/Year",placeholder:"Form/Year (e.g. Form 4, Standard 6)",errorMsg:null==S?void 0:null===(y=S.form)||void 0===y?void 0:y.message}),A({hook:k("state"),id:"state",inputName:"State",placeholder:"State (e.g. Kuala Lumpur)",errorMsg:null==S?void 0:null===(j=S.state)||void 0===j?void 0:j.message}),A({hook:k("country",{validate:e=>{if(!e||e.length<1)return"Please fill in your country."}}),id:"country",inputName:"Country",placeholder:"Country (e.g. Malaysia)",errorMsg:null==S?void 0:null===(b=S.country)||void 0===b?void 0:b.message})]}),(0,r.jsx)(i.Z,{props:{type:"submit"},isLoading:P,full:!0,children:"Update Details"})]})})]})})})}}},function(e){e.O(0,[627,257,414,536,584,888,774,179],function(){return e(e.s=1359)}),_N_E=e.O()}]);