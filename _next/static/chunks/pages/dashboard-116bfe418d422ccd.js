(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{6117:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return n(4667)}])},8804:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var s=n(5893);function r(e){let{children:t,isLoading:n=!1,props:r={},className:i="",flex:a=!0,full:l=!1,disabled:c=!1,onClick:d}=e;return(0,s.jsxs)("button",{onClick:d,className:"group relative justify-center rounded-md px-3 py-2 text-sm font-semibold text-white hover:opacity-75 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 disabled:opacity-75 "+(i.includes("bg-")?"":"bg-indigo-600 ")+(l?"w-full ":"")+(a?"flex ":"")+i,disabled:n||c,...r,children:[(0,s.jsxs)("svg",{className:"animate-spin h-5 w-5 mr-3"+(n?"":" hidden"),viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25 fill-indigo-600",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),t]})}},7312:function(e,t,n){"use strict";n.d(t,{Z:function(){return b}});var s=n(5893),r=n(1259),i=n(5675),a=n.n(i),l={src:"/mcchub/_next/static/media/mccWhite.370122d3.svg",height:50,width:407,blurWidth:0,blurHeight:0},c={src:"/mcchub/_next/static/media/mccWhiteSmall.429d837c.svg",height:48,width:147,blurWidth:0,blurHeight:0},d=n(1664),o=n.n(d),u=n(1163),h=n(7294);function m(e){let{pages:t=[],rightPages:n=[]}=e,r=(0,u.useRouter)();n.length&&"Sign Out"==n[n.length-1][0]||n.push(["Sign Out","/?signout=true"]);let[i,d]=(0,h.useState)(!1);return(0,s.jsx)("div",{children:(0,s.jsxs)("nav",{className:"bg-gray-800",children:[(0,s.jsx)("div",{className:"mx-auto max-w-7xl px-2 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"relative flex h-16 items-center justify-between",children:[(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center md:hidden",children:(0,s.jsxs)("button",{type:"button",className:"inline-flex items-center justify-center rounded-md p-2 text-gray-400 hover:bg-gray-700 hover:text-white focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white","aria-controls":"mobile-menu","aria-expanded":"false",onClick:()=>d(!i),children:[(0,s.jsx)("span",{className:"sr-only",children:"Open main menu"}),(0,s.jsx)("svg",{className:"h-6 w-6 "+(i?"hidden":"block"),fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})}),(0,s.jsx)("svg",{className:"h-6 w-6 "+(i?"block":"hidden"),fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})]})}),(0,s.jsxs)("div",{className:"flex flex-1 items-center justify-center md:items-stretch md:justify-start",children:[(0,s.jsx)("div",{className:"flex flex-shrink-0 items-center",children:(0,s.jsxs)(o(),{href:"/dashboard",children:[(0,s.jsx)(a(),{className:"block h-8 w-auto sm:hidden",priority:!0,src:c,alt:"MCC Small Logo"}),(0,s.jsx)(a(),{className:"hidden h-8 w-auto sm:block",priority:!0,src:l,alt:"MCC Logo"})]})}),(0,s.jsx)("div",{className:"hidden md:ml-6 md:block w-full",children:(0,s.jsxs)("div",{className:"flex",children:[t.map((e,t)=>{let[n,i]=e;return(0,s.jsx)(o(),{href:i,className:(r.pathname==i?"bg-gray-900 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white")+" rounded-md px-3 py-2 text-sm font-medium"+(0==t?" ml-0":" ml-2"),"aria-current":r.pathname==i?"page":void 0,children:n},t)}),(0,s.jsx)("div",{className:"flex-auto"}),n.map((e,t)=>{let[n,i]=e;return(0,s.jsx)(o(),{href:i,className:(r.pathname==i?"bg-gray-900 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white")+" rounded-md px-3 py-2 text-sm font-medium"+(0==t?" ml-0":" ml-2"),"aria-current":r.pathname==i?"page":void 0,children:n},t)})]})})]})]})}),(0,s.jsx)("div",{className:"md:hidden"+(i?"":" hidden"),id:"mobile-menu",children:(0,s.jsx)("div",{className:"space-y-1 px-2 pb-3 pt-2",children:[...t,...n].map((e,t)=>{let[n,i]=e;return(0,s.jsx)(o(),{href:i,className:(r.pathname==i?"bg-gray-900 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white")+" block rounded-md px-3 py-2 text-base font-medium","aria-current":r.pathname==i?"page":void 0,children:n},t)})})})]})})}var f=n(5696),x=n(1019),p=n(9008),g=n.n(p);function b(e){let{title:t,children:n,pages:i,rightPages:a}=e,[l,c]=(0,h.useState)(void 0),[d,o]=(0,h.useState)(""),p=(0,u.useRouter)();return(0,h.useEffect)(()=>{(0,r.Aj)(f.I,e=>{if(!e){p.push("/");return}c(e),(0,x.jM)((0,x.iH)(f.db,"role/".concat(e.uid)),e=>{o(e.val()),p.pathname.startsWith("/admin")&&"admin"!=e.val()&&p.push("/")},{onlyOnce:!0})})},[p]),(0,s.jsxs)("div",{children:[(0,s.jsx)(g(),{children:(0,s.jsx)("title",{lang:"en",children:t?"".concat(t," | MCC Hub"):"MCC Hub"},"title")}),(0,s.jsx)(m,{pages:i||("student"==d?[["Dashboard","/dashboard"]]:"teacher"==d||"parent"==d?[["Dashboard","/dashboard"],["Students","/students"],["Payments","/payments"]]:[["Dashboard","/admin"],["Users","/admin/users"],["Payments","/admin/payments"]]),rightPages:a||[["Profile","/profile"]],user:null==l?void 0:l.email}),(0,s.jsx)("main",{className:"p-3",children:(0,s.jsx)("div",{children:n})})]})}},8063:function(e){"use strict";e.exports={gh_pages_config:{branch:"gh-pages",repo:"git@github.com:veehz/mcchub.git",message:"Auto-generated commit",nojekyll:!0,dotfiles:!0},genders:{male:"I am a Male",female:"I am a Female",undisclosed:"Other/I prefer not to disclose"},currency:"RM",registration_fee:20,bank_details:["Bank","Account Name","Number:1010101010"],links:[{href:"https://ioimalaysia.org/",name:"Malaysian Informatics and Programming Society (MIPS) Website"}],firebaseConfig:{apiKey:"AIzaSyC02WuJ5btg2A6iTeGwYi0IDzGKziODv2k",authDomain:"mcc-registration-test.firebaseapp.com",databaseURL:"https://mcc-registration-test-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"mcc-registration-test",storageBucket:"mcc-registration-test.appspot.com",messagingSenderId:"927692212307",appId:"1:927692212307:web:e3cd12ba84a9720b4b9ea6"}}},5696:function(e,t,n){"use strict";n.d(t,{I:function(){return c},db:function(){return d}});var s=n(3977),r=n(1259),i=n(1019),a=n(8063);let l=(0,s.ZF)(a.firebaseConfig),c=(0,r.v0)(l),d=(0,i.N8)(l)},4667:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return N}});var s=n(5893),r=n(8804),i=n(7312),a=n(1664),l=n.n(a),c=n(5696),d=n(1259),o=n(7294),u=n(1163),h=n(1019);async function m(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!e&&c.I.currentUser)return c.I.currentUser;try{return await new Promise((e,t)=>{let n=c.I.onAuthStateChanged(t=>{n(),e(t)},t)})}catch(e){throw console.error("Error fetching user from Firebase:",e),e}}async function f(e){if(null===await m())return null;(0,h.jM)((0,h.iH)(c.db,"users/"+c.I.currentUser.uid),t=>{e(t.val())},e=>{throw console.error("Error fetching user details from Firebase:",e),e})}async function x(e){if(null===await m())return null;(0,h.jM)((0,h.iH)(c.db,"role/"+c.I.currentUser.uid),t=>{e(t.val())},e=>{throw console.error("Error fetching user role from Firebase:",e),e})}async function p(e){if(await m()===null)return null;(0,h.jM)((0,h.iH)(c.db,"managedStudents/"+c.I.currentUser.uid+"/"),t=>{e(t.val())},e=>{throw console.error("Error fetching managed students from Firebase:",e),e})}async function g(e){p(t=>{e(null===t?0:Object.keys(t).length)})}async function b(e){if(await m()===null)return null;(0,h.jM)((0,h.iH)(c.db,"payments/"+c.I.currentUser.uid+"/"),t=>{e(t.val())},e=>{throw console.error("Error fetching payments from Firebase:",e),e})}async function j(e){if(await m()===null)return null;(0,h.jM)((0,h.iH)(c.db,"contestInfo"),t=>{e(t.val())},e=>{throw console.error("Error fetching contest info from Firebase:",e),e})}var v=n(8063),y=n.n(v);let w=e=>{let{title:t,className:n,children:r}=e;return(0,s.jsxs)("div",{className:"rounded-lg overflow-hidden shadow-lg p-4 mb-4 "+(n||""),children:[(0,s.jsx)("div",{className:"font-bold text-xl mb-2",children:t}),(0,s.jsx)("div",{className:"text-gray-700 text-base",children:r})]})};function N(){var e;let[t,n]=(0,o.useState)([]),[a,h]=(0,o.useState)(!1),[p,v]=(0,o.useState)(!1),[N,k]=(0,o.useState)(!1),[I,S]=(0,o.useState)(!1),[C,_]=(0,o.useState)(""),[M,E]=(0,o.useState)(0),[D,A]=(0,o.useState)({announcements:{}}),P=(0,u.useRouter)(),[H,L]=(0,o.useState)([]);return(0,o.useEffect)(()=>{m().then(async e=>{e||P.push("/"),x(e=>{"admin"==e&&P.push("/admin"),_(e),f(t=>{t.nric||"student"!=e||k(!0),t.name||S(!0)})}),j(e=>{A(e)}),e.emailVerified||h(!0),g(e=>{E(e)}),b(e=>{let t=[];if(e)for(let n in e)t.push({...e[n],paymentId:n});L(t)})})},[]),(0,s.jsx)(i.Z,{title:"Dashboard",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-between",children:[(0,s.jsxs)("div",{className:"w-full md:w-1/3 px-2",children:[(0,s.jsx)(w,{title:"To-do",children:(0,s.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,s.jsx)("div",{children:"string"==typeof t?t:t.map((e,t)=>(0,s.jsx)("div",{children:e},t))}),a?(0,s.jsx)(r.Z,{full:!0,disabled:p,onClick:()=>{c.I.currentUser&&(0,d.w$)(c.I.currentUser).then(()=>{n("Verification email sent.")}).catch(e=>{n(e.message)}).finally(()=>{v(!0)})},children:"Verify Your Email"}):null,N?(0,s.jsx)(l(),{href:"/profile/bind-nric/",children:(0,s.jsx)(r.Z,{full:!0,children:"Bind Your IC Number"})}):null,I?(0,s.jsx)(l(),{href:"/profile",children:(0,s.jsx)(r.Z,{full:!0,children:"Complete Your Profile"})}):null,a||N||I?null:(0,s.jsx)("div",{className:"text-green-500",children:"All done!"})]})}),["teacher","parent"].includes(C)?(0,s.jsxs)(w,{title:"Students",children:[(0,s.jsxs)("div",{children:[M," ",1==M?"student":"students"," "]}),0==M?(0,s.jsx)("div",{className:"text-red-500",children:"Remember to add students!"}):null,(0,s.jsx)(l(),{href:"/students",children:(0,s.jsx)(r.Z,{full:!0,children:"Add Students"})})]}):null,["teacher","parent"].includes(C)&&(null==D?void 0:D.registrationDeadline)?(0,s.jsx)(w,{title:"Registration Deadline",children:new Date(D.registrationDeadline).toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric"})}):null,(0,s.jsx)(w,{title:"Announcements",children:(null==D?void 0:null===(e=D.announcements)||void 0===e?void 0:e.length)>0?Object.keys(D.announcements).map(e=>(0,s.jsx)("div",{children:D.announcements[e]},e)):"Any announcements will appear here."})]}),(0,s.jsx)("div",{className:"w-full md:w-1/3 px-2",children:(0,s.jsxs)(w,{title:"Your Payments",children:[(0,s.jsx)(w,{title:"You need to pay...",className:"",children:(0,s.jsxs)("span",{className:"text-xl",children:[y().currency,M*y().registration_fee]})}),(0,s.jsx)("div",{children:(0,s.jsx)("div",{className:"container mx-auto",children:(0,s.jsxs)("table",{className:"table-auto w-full",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"text-left",children:"Payment ID"}),(0,s.jsx)("th",{className:"text-left",children:"Amount"}),(0,s.jsx)("th",{className:"text-left",children:"Status"})]})}),(0,s.jsx)("tbody",{children:H?H.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"border px-4 py-2",children:e.paymentId}),(0,s.jsxs)("td",{className:"border px-4 py-2",children:[y().currency,e.amount]}),(0,s.jsx)("td",{className:"border px-4 py-2",children:e.approved?e.approved.status:"pending"})]},e.paymentId)):null})]})})})]})}),(0,s.jsxs)("div",{className:"w-full md:w-1/3 px-2",children:[(0,s.jsx)(w,{title:"Important Links",children:y().links.map(e=>(0,s.jsx)("a",{href:e.href,target:"_blank",rel:"noopener",children:(0,s.jsx)(r.Z,{full:!0,children:e.name})},e.href))}),(null==D?void 0:D.informationTitle)?(0,s.jsx)(w,{title:D.informationTitle,children:D.information}):null]})]})})}}},function(e){e.O(0,[627,257,414,888,774,179],function(){return e(e.s=6117)}),_N_E=e.O()}]);