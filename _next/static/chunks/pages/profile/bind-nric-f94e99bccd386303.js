(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[432],{7057:function(a,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile/bind-nric",function(){return n(3778)}])},1454:function(a,e,n){"use strict";n.d(e,{Z:function(){return s}});var i=n(5893);function s(a){let{children:e,id:n,disabled:s=!1,hook:t={},value:r}=a;return(0,i.jsxs)("div",{className:"flex space-x-2 p-1 text-sm font-bold "+(s?" text-gray-400":""),children:[(0,i.jsx)("input",{disabled:s,type:"radio",id:n,...t,className:"inline-block",value:void 0===r?n:r}),(0,i.jsx)("label",{className:"inline-block w-full",htmlFor:n,children:e})]})}},3706:function(a,e,n){"use strict";n.d(e,{Z:function(){return s}});var i=n(5893);function s(a){let{title:e,children:n,errorMsg:s}=a;return(0,i.jsxs)("div",{className:"space-y-0",children:[(0,i.jsxs)("div",{className:"px-2 py-1",children:[e," ",(0,i.jsx)("span",{className:"text-sm text-red-500",children:s})]}),n]})}},1365:function(a,e,n){"use strict";n.d(e,{I:function(){return s},Z:function(){return t}});var i=n(5893);function s(a,e){return{...a,...e}}function t(a){let{title:e,icon:n,children:s,className:t,hidden:r=!0,mainText:l="OK",mainColors:o,mainOnClick:d,secondaryText:c="Cancel",secondaryShow:u=!0,secondaryColors:m,secondaryOnClick:h}=a,x={checkmark:(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"48",viewBox:"0 96 960 960",width:"48",children:(0,i.jsx)("path",{className:"fill-green-300",d:"m421 667-98-98q-9-9-22-9t-23 10q-9 9-9 22t9 22l122 123q9 9 21 9t21-9l239-239q10-10 10-23t-10-23q-10-9-23.5-8.5T635 453L421 667Zm59 309q-82 0-155-31.5t-127.5-86Q143 804 111.5 731T80 576q0-83 31.5-156t86-127Q252 239 325 207.5T480 176q83 0 156 31.5T763 293q54 54 85.5 127T880 576q0 82-31.5 155T763 858.5q-54 54.5-127 86T480 976Z"})}),error:(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"48",viewBox:"0 96 960 960",width:"48",children:(0,i.jsx)("path",{className:"fill-red-300",d:"M479.754 801Q504 801 519.5 786.246q15.5-14.755 15.5-39Q535 723 519.746 707q-15.255-16-39.5-16Q456 691 440.5 706.982 425 722.965 425 747.211q0 24.245 15.254 39.017Q455.509 801 479.754 801Zm3.421-177Q503 624 516.5 610.375 530 596.75 530 577V401q0-19.75-13.675-33.375Q502.649 354 482.825 354 463 354 449.5 367.625 436 381.25 436 401v176q0 19.75 13.675 33.375Q463.351 624 483.175 624Zm-2.771 377q-88.872 0-166.125-33.084-77.254-33.083-135.183-91.012-57.929-57.929-91.012-135.119Q55 664.594 55 575.638q0-88.957 33.084-166.285 33.083-77.328 90.855-134.809 57.772-57.482 135.036-91.013Q391.238 150 480.279 150q89.04 0 166.486 33.454 77.446 33.453 134.853 90.802 57.407 57.349 90.895 134.877Q906 486.66 906 575.734q0 89.01-33.531 166.247-33.531 77.237-91.013 134.86-57.481 57.623-134.831 90.891Q569.276 1001 480.404 1001Z"})}),warning:(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"48",viewBox:"0 96 960 960",width:"48",children:(0,i.jsx)("path",{className:"fill-yellow-300",d:"M100 949q-14.483 0-24.98-6.925Q64.521 935.15 59 925q-6.167-9.6-6.583-22.381Q52 889.839 59 877l380-656q7-12 18.103-17.5 11.102-5.5 23-5.5Q492 198 503 203.5q11 5.5 18 17.5l380 656q7 12.839 6.583 25.619Q907.167 915.4 901 925q-5.696 9.75-16.106 16.875Q874.483 949 860 949H100Zm384.175-132q13.4 0 23.613-10.388Q518 796.224 518 782.825q0-13.4-10.388-23.112Q497.224 750 483.825 750q-13.4 0-23.613 9.888Q450 769.776 450 783.175q0 13.4 10.388 23.612Q470.776 817 484.175 817Zm0-109q12.825 0 21.325-8.625T514 678V522q0-12.75-8.675-21.375-8.676-8.625-21.5-8.625-12.825 0-21.325 8.625T454 522v156q0 12.75 8.675 21.375 8.676 8.625 21.5 8.625Z"})}),notif:(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"48",viewBox:"0 96 960 960",width:"48",children:(0,i.jsx)("path",{className:"fill-blue-300",d:"M480.281 621Q494 621 503 611.8q9-9.2 9-22.8V450q0-12.6-9.281-21.8-9.28-9.2-23-9.2-13.719 0-22.219 9.2-8.5 9.2-8.5 21.8v139q0 13.6 8.993 22.8 8.993 9.2 22.288 9.2Zm-.299 107q14.593 0 25.806-10.982Q517 706.035 517 691.518 517 677 505.805 666t-25.787-11q-14.593 0-25.806 11.079Q443 677.158 443 691.579T454.195 717q11.195 11 25.787 11ZM165.44 878q-21.19 0-34.815-13.675-13.625-13.676-13.625-34Q117 810 130.625 796.5 144.25 783 165 783h45V505q0-92.085 53.5-167.542Q317 262 407 241.583V218q0-30.5 21.223-50.75T479.765 147q30.318 0 51.777 20.25Q553 187.5 553 218v23.583Q644 262 698 337.458 752 412.915 752 505v278h44q19.625 0 33.812 13.675 14.188 13.676 14.188 34Q844 851 829.812 864.5 815.625 878 796 878H165.44Zm315.06 123q-35.45 0-61.975-25.85T392 913h177q0 37-26.231 62.5-26.232 25.5-62.269 25.5Z"})})};return(0,i.jsxs)("div",{className:"relative z-10 "+t,"aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",hidden:r,children:[(0,i.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"}),(0,i.jsx)("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:(0,i.jsx)("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:(0,i.jsxs)("div",{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg",children:[(0,i.jsx)("div",{className:"bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4",children:(0,i.jsxs)("div",{className:"sm:flex sm:items-start",children:[(0,i.jsx)("div",{className:"mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full sm:mx-0 sm:h-10 sm:w-10",children:n?"string"==typeof n&&x[n]?x[n]:n:null}),(0,i.jsxs)("div",{className:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left",children:[(0,i.jsx)("h3",{className:"text-base font-semibold leading-6 text-gray-900",id:"modal-title",children:e}),(0,i.jsx)("div",{className:"mt-2",children:(0,i.jsx)("div",{className:"text-sm text-gray-500",children:s})})]})]})}),(0,i.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:[(0,i.jsx)("button",{type:"button",className:"inline-flex w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:opacity-80 sm:ml-3 sm:w-auto "+o,onClick:d,children:l}),(0,i.jsx)("button",{type:"button",className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:opacity-80 sm:mt-0 sm:w-auto "+m,hidden:!u,onClick:h,children:c})]})]})})})]})}},291:function(a){"use strict";a.exports=["Afghan","Albanian","Algerian","American","Andorran","Angolan","Anguillan","Citizen of Antigua and Barbuda","Argentine","Armenian","Australian","Austrian","Azerbaijani","Bahamian","Bahraini","Bangladeshi","Barbadian","Belarusian","Belgian","Belizean","Beninese","Bermudian","Bhutanese","Bolivian","Citizen of Bosnia and Herzegovina","Botswanan","Brazilian","British","British Virgin Islander","Bruneian","Bulgarian","Burkinan","Burmese","Burundian","Cambodian","Cameroonian","Canadian","Cape Verdean","Cayman Islander","Central African","Chadian","Chilean","Chinese","Colombian","Comoran","Congolese (Congo)","Congolese (DRC)","Cook Islander","Costa Rican","Croatian","Cuban","Cymraes","Cymro","Cypriot","Czech","Danish","Djiboutian","Dominican","Citizen of the Dominican Republic","Dutch","East Timorese","Ecuadorean","Egyptian","Emirati","English","Equatorial Guinean","Eritrean","Estonian","Ethiopian","Faroese","Fijian","Filipino","Finnish","French","Gabonese","Gambian","Georgian","German","Ghanaian","Gibraltarian","Greek","Greenlandic","Grenadian","Guamanian","Guatemalan","Citizen of Guinea-Bissau","Guinean","Guyanese","Haitian","Honduran","Hong Konger","Hungarian","Icelandic","Indian","Indonesian","Iranian","Iraqi","Irish","Israeli","Italian","Ivorian","Jamaican","Japanese","Jordanian","Kazakh","Kenyan","Kittitian","Citizen of Kiribati","Kosovan","Kuwaiti","Kyrgyz","Lao","Latvian","Lebanese","Liberian","Libyan","Liechtenstein citizen","Lithuanian","Luxembourger","Macanese","Macedonian","Malagasy","Malawian","Malaysian","Maldivian","Malian","Maltese","Marshallese","Martiniquais","Mauritanian","Mauritian","Mexican","Micronesian","Moldovan","Monegasque","Mongolian","Montenegrin","Montserratian","Moroccan","Mosotho","Mozambican","Namibian","Nauruan","Nepalese","New Zealander","Nicaraguan","Nigerian","Nigerien","Niuean","North Korean","Northern Irish","Norwegian","Omani","Pakistani","Palauan","Palestinian","Panamanian","Papua New Guinean","Paraguayan","Peruvian","Pitcairn Islander","Polish","Portuguese","Prydeinig","Puerto Rican","Qatari","Romanian","Russian","Rwandan","Salvadorean","Sammarinese","Samoan","Sao Tomean","Saudi Arabian","Scottish","Senegalese","Serbian","Citizen of Seychelles","Sierra Leonean","Singaporean","Slovak","Slovenian","Solomon Islander","Somali","South African","South Korean","South Sudanese","Spanish","Sri Lankan","St Helenian","St Lucian","Stateless","Sudanese","Surinamese","Swazi","Swedish","Swiss","Syrian","Taiwanese","Tajik","Tanzanian","Thai","Togolese","Tongan","Trinidadian","Tristanian","Tunisian","Turkish","Turkmen","Turks and Caicos Islander","Tuvaluan","Ugandan","Ukrainian","Uruguayan","Uzbek","Vatican citizen","Citizen of Vanuatu","Venezuelan","Vietnamese","Vincentian","Wallisian","Welsh","Yemeni","Zambian","Zimbabwean"]},432:function(a){"use strict";a.exports={nric:/[0-9]{2}[0-1][0-9][0-3][0-9]-[0-9]{2}-[0-9]{4}/,passport:/[A-Z0-9]{1,9}/,phone:/\+?[\d ]{1,6}[- ]?[\d ]{1,15}/,dob:/\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])/,email:/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/,amount:/\d+(\.\d{1,2})?/}},3778:function(a,e,n){"use strict";n.r(e),n.d(e,{default:function(){return v}});var i=n(5893),s=n(8804),t=n(7312),r=n(7294),l=n(7536),o=n(5696),d=n(1019),c=n(1259),u=n(1758),m=n(3706),h=n(1454),x=n(291),f=n.n(x),g=n(1365),p=n(1163),y=n(432),b=n.n(y);function v(){var a;let{register:e,handleSubmit:n,setValue:x,formState:{errors:y},watch:v}=(0,l.cI)(),[w,N]=(0,r.useState)(!1),[j,q]=(0,r.useState)(!1),[C,S]=(0,r.useState)(!1),[M,k]=(0,r.useState)(""),z=v("isMalaysian","null"),[I,T]=(0,r.useState)(!1),[Q,B]=(0,r.useReducer)(g.I,{}),P={title:"Error.",icon:"error",children:"There was an error. Please contact us if problem persists.",hidden:!1,mainText:"OK",mainColors:"bg-red-600",mainOnClick:()=>{B({hidden:!0})},secondaryShow:!1},Z=(0,p.useRouter)(),A=async a=>{S(!0),q(!1);let e=a.nric?a.nric.trim():"",n=a.nationality?a.nationality.trim():"",i=a.passport?a.passport.trim():"";if("null"===z){B({...P,children:"Please select your nationality."}),S(!1),q(!0);return}if("true"===z&&0===e.length){B({...P,children:"Please enter your NRIC."}),S(!1),q(!0);return}if("false"===z&&0===n.length){B({...P,children:"Please select your nationality."}),S(!1),q(!0);return}if("false"===z&&0===i.length){B({...P,children:"Please enter your passport number."}),S(!1),q(!0);return}let s="true"===z?e:i;(0,d.jM)((0,d.iH)(o.db,"nric/"+s+"/student"),async a=>{if(a.val()){B({...P,children:"NRIC/Passport Number is already taken. Please contact us if this is a mistake."}),S(!1),q(!0);return}T(!0);try{var e,i,t;await (0,d.t8)((0,d.iH)(o.db,"users/"+(null===(e=o.I.currentUser)||void 0===e?void 0:e.uid)+"/nationality"),"true"===z?"Malaysian":n),await (0,d.t8)((0,d.iH)(o.db,"users/"+(null===(i=o.I.currentUser)||void 0===i?void 0:i.uid)+"/nric"),s),await (0,d.t8)((0,d.iH)(o.db,"nric/"+s+"/student"),null===(t=o.I.currentUser)||void 0===t?void 0:t.uid),B({title:"Success!",icon:"checkmark",children:"Profile is successfully bound.",hidden:!1,mainText:"OK",mainColors:"bg-green-600",mainOnClick:()=>{B({hidden:!0}),Z.push("/dashboard")},secondaryShow:!1}),S(!1),q(!1)}catch(a){B({...P,children:"There was an error. Please contact us if problem persists."}),S(!1),q(!0);return}})};return(0,c.Aj)(o.I,async a=>{I||!a||w||(N(!0),(0,d.jM)((0,d.iH)(o.db,"users/"+a.uid+"/nric"),e=>{let n=e.val();n?(0,d.jM)((0,d.iH)(o.db,"users/"+a.uid+"/nationality"),a=>{let e="Malaysian"===a.val();x("isMalaysian",e?"true":"false"),e?x("nric",n):x("passport",n),k(["An indentification is already bound to your account.","If you want to change your identification, please contact us."])},{onlyOnce:!0}):(0,d.jM)((0,d.iH)(o.db,"role/"+a.uid),a=>{"student"===a.val()?(q(!0),k(["You can bind your identification only once.","Please check before submitting."])):k(["You are not a student. You don't have to bind your IC number.","Please contact us if this is a mistake."])})},{onlyOnce:!0}))}),(0,i.jsxs)(t.Z,{title:"Bind Identification",children:[(0,i.jsx)("div",{className:"flex min-h-full items-center justify-center px-4 sm:px-6 lg:px-8",children:(0,i.jsxs)("div",{className:"w-full space-y-8 max-w-md",children:[(0,i.jsx)("div",{children:(0,i.jsx)("h2",{className:"mt-6 text-center text-3xl font-bold tracking-tight text-gray-900",children:"Bind NRIC/Passport Number"})}),(0,i.jsx)("div",{className:"text-center text-sm",children:"string"==typeof M?M:M.map((a,e)=>(0,i.jsx)("p",{children:a},e))}),(0,i.jsxs)(m.Z,{children:[(0,i.jsx)(h.Z,{id:"malaysian",value:"true",hook:e("isMalaysian"),disabled:!j,children:"Malaysian"}),(0,i.jsx)(h.Z,{id:"nonmalaysian",value:"false",hook:e("isMalaysian"),disabled:!j,children:"Non-Malaysian"})]}),(0,i.jsx)("form",{className:"space-y-6 w-full",onSubmit:n(A),noValidate:!0,children:(0,i.jsxs)("div",{className:"space-y-2",children:["false"===z?(0,i.jsxs)("div",{className:"w-full",children:[(0,i.jsx)("div",{className:"px-2 py-1",children:(0,i.jsx)("label",{children:"Nationality"})}),(0,i.jsxs)("select",{className:"rounded-md relative block w-full border-0 py-1.5 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:z-10 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 disabled:opacity-75 disabled:bg-slate-100",disabled:!1,id:"nationality",defaultValue:"select-one",children:[(0,i.jsx)("option",{value:"select-one",disabled:!0,children:"Select your nationality"}),f().filter(a=>"Malaysian"!=a).map((a,n)=>(0,i.jsx)("option",{value:a,...e("nationality",{validate:{notEmpty:a=>"select-one"!=a||"Please select your nationality"}}),children:a},n))]})]}):null,"true"===z?(0,u.Z)({hook:e("nric",{pattern:{value:b().nric,message:"Invalid NRIC format."}}),id:"nric",inputName:"NRIC",placeholder:"NRIC with dashes (e.g. 031231-14-1234)",disabled:!j,errorMsg:null==y?void 0:null===(a=y.nric)||void 0===a?void 0:a.message}):null,"false"===z?(0,u.Z)({hook:e("passport"),id:"nric",inputName:"Passport Number",placeholder:"Passport Number",disabled:!j}):null,(0,i.jsx)(s.Z,{full:!0,props:{type:"submit"},isLoading:C,disabled:!j,children:"Bind NRIC/Passport Number"})]})})]})}),(0,g.Z)(Q)]})}}},function(a){a.O(0,[627,257,414,536,584,888,774,179],function(){return a(a.s=7057)}),_N_E=a.O()}]);