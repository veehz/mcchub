(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[609],{9037:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/students",function(){return s(7159)}])},8804:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var i=s(5893);function n(e){let{children:t,isLoading:s=!1,props:n={},className:a="",flex:r=!0,full:l=!1,disabled:d=!1,onClick:c}=e;return(0,i.jsxs)("button",{onClick:c,className:"group relative justify-center rounded-md px-3 py-2 text-sm font-semibold text-white hover:opacity-75 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 disabled:opacity-75 "+(a.includes("bg-")?"":"bg-indigo-600 ")+(l?"w-full ":"")+(r?"flex ":"")+a,disabled:s||d,...n,children:[(0,i.jsxs)("svg",{className:"animate-spin h-5 w-5 mr-3"+(s?"":" hidden"),viewBox:"0 0 24 24",children:[(0,i.jsx)("circle",{className:"opacity-25 fill-indigo-600",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,i.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),t]})}},7312:function(e,t,s){"use strict";s.d(t,{Z:function(){return g}});var i=s(5893),n=s(1259),a=s(5675),r=s.n(a),l={src:"/_next/static/media/mccWhite.370122d3.svg",height:50,width:407,blurWidth:0,blurHeight:0},d={src:"/_next/static/media/mccWhiteSmall.429d837c.svg",height:48,width:147,blurWidth:0,blurHeight:0},c=s(1664),o=s.n(c),u=s(1163),h=s(7294);function m(e){let{pages:t=[],rightPages:s=[]}=e,n=(0,u.useRouter)();s.length&&"Sign Out"==s[s.length-1][0]||s.push(["Sign Out","/?signout=true"]);let[a,c]=(0,h.useState)(!1);return(0,i.jsx)("div",{children:(0,i.jsxs)("nav",{className:"bg-gray-800",children:[(0,i.jsx)("div",{className:"mx-auto max-w-7xl px-2 sm:px-6 lg:px-8",children:(0,i.jsxs)("div",{className:"relative flex h-16 items-center justify-between",children:[(0,i.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center md:hidden",children:(0,i.jsxs)("button",{type:"button",className:"inline-flex items-center justify-center rounded-md p-2 text-gray-400 hover:bg-gray-700 hover:text-white focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white","aria-controls":"mobile-menu","aria-expanded":"false",onClick:()=>c(!a),children:[(0,i.jsx)("span",{className:"sr-only",children:"Open main menu"}),(0,i.jsx)("svg",{className:"h-6 w-6 "+(a?"hidden":"block"),fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})}),(0,i.jsx)("svg",{className:"h-6 w-6 "+(a?"block":"hidden"),fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})]})}),(0,i.jsxs)("div",{className:"flex flex-1 items-center justify-center md:items-stretch md:justify-start",children:[(0,i.jsx)("div",{className:"flex flex-shrink-0 items-center",children:(0,i.jsxs)(o(),{href:"/dashboard",children:[(0,i.jsx)(r(),{className:"block h-8 w-auto sm:hidden",priority:!0,src:d,alt:"MCC Small Logo"}),(0,i.jsx)(r(),{className:"hidden h-8 w-auto sm:block",priority:!0,src:l,alt:"MCC Logo"})]})}),(0,i.jsx)("div",{className:"hidden md:ml-6 md:block w-full",children:(0,i.jsxs)("div",{className:"flex",children:[t.map((e,t)=>{let[s,a]=e;return(0,i.jsx)(o(),{href:a,className:(n.pathname==a?"bg-gray-900 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white")+" rounded-md px-3 py-2 text-sm font-medium"+(0==t?" ml-0":" ml-2"),"aria-current":n.pathname==a?"page":void 0,children:s},t)}),(0,i.jsx)("div",{className:"flex-auto"}),s.map((e,t)=>{let[s,a]=e;return(0,i.jsx)(o(),{href:a,className:(n.pathname==a?"bg-gray-900 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white")+" rounded-md px-3 py-2 text-sm font-medium"+(0==t?" ml-0":" ml-2"),"aria-current":n.pathname==a?"page":void 0,children:s},t)})]})})]})]})}),(0,i.jsx)("div",{className:"md:hidden"+(a?"":" hidden"),id:"mobile-menu",children:(0,i.jsx)("div",{className:"space-y-1 px-2 pb-3 pt-2",children:[...t,...s].map((e,t)=>{let[s,a]=e;return(0,i.jsx)(o(),{href:a,className:(n.pathname==a?"bg-gray-900 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white")+" block rounded-md px-3 py-2 text-base font-medium","aria-current":n.pathname==a?"page":void 0,children:s},t)})})})]})})}var x=s(5696),f=s(1019),p=s(9008),b=s.n(p);function g(e){let{title:t,children:s,pages:a,rightPages:r}=e,[l,d]=(0,h.useState)(void 0),[c,o]=(0,h.useState)(""),p=(0,u.useRouter)();return(0,h.useEffect)(()=>{(0,n.Aj)(x.I,e=>{if(!e){p.push("/");return}d(e),(0,f.jM)((0,f.iH)(x.db,"role/".concat(e.uid)),e=>{o(e.val()),p.pathname.startsWith("/admin")&&"admin"!=e.val()&&p.push("/")},{onlyOnce:!0})})},[p]),(0,i.jsxs)("div",{children:[(0,i.jsx)(b(),{children:(0,i.jsx)("title",{lang:"en",children:t?"".concat(t," | MCC Hub"):"MCC Hub"},"title")}),(0,i.jsx)(m,{pages:a||("student"==c?[["Dashboard","/dashboard"]]:"teacher"==c||"parent"==c?[["Dashboard","/dashboard"],["Students","/students"],["Payments","/payments"]]:[["Dashboard","/admin"],["Users","/admin/users"],["Payments","/admin/payments"]]),rightPages:r||[["Profile","/profile"]],user:null==l?void 0:l.email}),(0,i.jsx)("main",{className:"p-3",children:(0,i.jsx)("div",{children:s})})]})}},8063:function(e){"use strict";e.exports={currency:"RM",registration_fee:20,bank_details:["Bank","Account Name","Number:1010101010"],firebaseConfig:{apiKey:"AIzaSyC02WuJ5btg2A6iTeGwYi0IDzGKziODv2k",authDomain:"mcc-registration-test.firebaseapp.com",databaseURL:"https://mcc-registration-test-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"mcc-registration-test",storageBucket:"mcc-registration-test.appspot.com",messagingSenderId:"927692212307",appId:"1:927692212307:web:e3cd12ba84a9720b4b9ea6"}}},5696:function(e,t,s){"use strict";s.d(t,{I:function(){return d},db:function(){return c}});var i=s(3977),n=s(1259),a=s(1019),r=s(8063);let l=(0,i.ZF)(r.firebaseConfig),d=(0,n.v0)(l),c=(0,a.N8)(l)},7159:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return m}});var i=s(5893),n=s(8804),a=s(7312),r=s(5696),l=s(1259),d=s(1019),c=s(1664),o=s.n(c),u=s(7294);let h=e=>{let{nric:t,fetchStatus:s,children:a}=e,l=(0,u.useRef)(!1),[c,h]=(0,u.useState)(!1),[m,x]=(0,u.useState)(""),[f,p]=(0,u.useState)(!1);return(0,u.useEffect)(()=>{!l.current&&(s||c)&&(l.current=!0,(0,d.jM)((0,d.iH)(r.db,"nric/"+t+"/student"),e=>{if(!e.exists()){x("Profile isn't bound");return}(0,d.jM)((0,d.iH)(r.db,"users/"+e.val()+"/dob"),e=>{if(p(!0),!e.exists()){x("Profile bound, Profile isn't complete");return}x("Profile complete.")},e=>{console.error(e)})}))},[s,c,t]),(0,i.jsxs)("div",{className:"rounded-lg overflow-hidden shadow-lg p-4 mb-4",onClick:()=>{h(!0)},children:[(0,i.jsx)("div",{className:"font-bold text-xl mb-2",children:t.split("-").join(" - ")}),(0,i.jsx)("div",{className:"text-gray-700 text-base mb-2",children:m}),(0,i.jsx)(o(),{href:"/students/edit?id=".concat(t),children:(0,i.jsx)(n.Z,{full:!0,className:f?"":"hidden",children:"Edit Profile"})})]})};function m(){let[e,t]=(0,u.useState)(!1),[s,c]=(0,u.useState)([]);return(0,u.useEffect)(()=>{(0,l.Aj)(r.I,e=>{e&&(0,d.jM)((0,d.iH)(r.db,"managedStudents/"+e.uid),e=>{e.val()&&c(Object.keys(e.val()))},{onlyOnce:!0})})},[]),(0,i.jsxs)(a.Z,{title:"Students",children:[(0,i.jsxs)("div",{className:"flex flex-wrap",children:[(0,i.jsx)(o(),{href:"/students/add",children:(0,i.jsxs)(n.Z,{className:"mx-4 my-2 text-center",children:[(0,i.jsx)("span",{className:"font-extrabold",children:"+"}),"\xa0Add Student"]})}),(0,i.jsx)(n.Z,{className:"mx-4 my-2",onClick:()=>t(!0),children:"Fetch All Student Status"})]}),(0,i.jsx)("div",{className:"flex flex-wrap",children:s.map(t=>(0,i.jsx)("div",{className:"w-72 p-4",children:(0,i.jsx)(h,{nric:t,fetchStatus:e})},t))})]})}}},function(e){e.O(0,[627,257,414,888,774,179],function(){return e(e.s=9037)}),_N_E=e.O()}]);