(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[609],{9037:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/students",function(){return n(7159)}])},8804:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(5893);function s(e){let{children:t,isLoading:n=!1,props:s={},className:i="",flex:a=!0,full:l=!1,disabled:c=!1,onClick:o}=e;return(0,r.jsxs)("button",{onClick:o,className:"group relative justify-center rounded-md px-3 py-2 text-sm font-semibold text-white hover:opacity-75 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 disabled:opacity-75 "+(i.includes("bg-")?"":"bg-indigo-600 ")+(l?"w-full ":"")+(a?"flex ":"")+i,disabled:n||c,...s,children:[(0,r.jsxs)("svg",{className:"animate-spin h-5 w-5 mr-3"+(n?"":" hidden"),viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25 fill-indigo-600",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),t]})}},7312:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(5893),s=n(5675),i=n.n(s),a={src:"/mcchub/_next/static/media/mccWhite.370122d3.svg",height:50,width:407,blurWidth:0,blurHeight:0},l={src:"/mcchub/_next/static/media/mccWhiteSmall.429d837c.svg",height:48,width:147,blurWidth:0,blurHeight:0},c=n(1664),o=n.n(c),d=n(1163),u=n(7294);function m(e){let{pages:t=[],rightPages:n=[]}=e,s=(0,d.useRouter)();n.length&&"Sign Out"==n[n.length-1][0]||n.push(["Sign Out","/?signout=true"]);let[c,m]=(0,u.useState)(!1);return(0,r.jsx)("div",{children:(0,r.jsxs)("nav",{className:"bg-gray-800",children:[(0,r.jsx)("div",{className:"mx-auto max-w-7xl px-2 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"relative flex h-16 items-center justify-between",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center md:hidden",children:(0,r.jsxs)("button",{type:"button",className:"inline-flex items-center justify-center rounded-md p-2 text-gray-400 hover:bg-gray-700 hover:text-white focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white","aria-controls":"mobile-menu","aria-expanded":"false",onClick:()=>m(!c),children:[(0,r.jsx)("span",{className:"sr-only",children:"Open main menu"}),(0,r.jsx)("svg",{className:"h-6 w-6 "+(c?"hidden":"block"),fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})}),(0,r.jsx)("svg",{className:"h-6 w-6 "+(c?"block":"hidden"),fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})]})}),(0,r.jsxs)("div",{className:"flex flex-1 items-center justify-center md:items-stretch md:justify-start",children:[(0,r.jsx)("div",{className:"flex flex-shrink-0 items-center",children:(0,r.jsxs)(o(),{href:"/dashboard",children:[(0,r.jsx)(i(),{className:"block h-8 w-auto sm:hidden",priority:!0,src:l,alt:"MCC Small Logo"}),(0,r.jsx)(i(),{className:"hidden h-8 w-auto sm:block",priority:!0,src:a,alt:"MCC Logo"})]})}),(0,r.jsx)("div",{className:"hidden md:ml-6 md:block w-full",children:(0,r.jsxs)("div",{className:"flex",children:[t.map((e,t)=>{let[n,i]=e;return(0,r.jsx)(o(),{href:i,className:(s.pathname==i?"bg-gray-900 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white")+" rounded-md px-3 py-2 text-sm font-medium"+(0==t?" ml-0":" ml-2"),"aria-current":s.pathname==i?"page":void 0,children:n},t)}),(0,r.jsx)("div",{className:"flex-auto"}),n.map((e,t)=>{let[n,i]=e;return(0,r.jsx)(o(),{href:i,className:(s.pathname==i?"bg-gray-900 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white")+" rounded-md px-3 py-2 text-sm font-medium"+(0==t?" ml-0":" ml-2"),"aria-current":s.pathname==i?"page":void 0,children:n},t)})]})})]})]})}),(0,r.jsx)("div",{className:"md:hidden"+(c?"":" hidden"),id:"mobile-menu",children:(0,r.jsx)("div",{className:"space-y-1 px-2 pb-3 pt-2",children:[...t,...n].map((e,t)=>{let[n,i]=e;return(0,r.jsx)(o(),{href:i,className:(s.pathname==i?"bg-gray-900 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white")+" block rounded-md px-3 py-2 text-base font-medium","aria-current":s.pathname==i?"page":void 0,children:n},t)})})})]})})}var h=n(1259),f=n(9008),x=n.n(f),g=n(4023),b=n(5696);function p(e){let{title:t,children:n,pages:s,rightPages:i}=e,[a,l]=(0,u.useState)(void 0),[c,o]=(0,u.useState)(""),f=(0,d.useRouter)();return(0,u.useEffect)(()=>{(0,h.Aj)(b.I,e=>{if(!e){f.push("/");return}l(e),(0,g.cY)().then(e=>{if(o(e),f.pathname.startsWith("/admin")&&"admin"!=e){f.push("/");return}})})},[f]),(0,r.jsxs)("div",{children:[(0,r.jsx)(x(),{children:(0,r.jsx)("title",{lang:"en",children:t?"".concat(t," | MCC Hub"):"MCC Hub"},"title")}),(0,r.jsx)(m,{pages:s||("student"==c?[["Dashboard","/dashboard"]]:"teacher"==c||"parent"==c?[["Dashboard","/dashboard"],["Students","/students"],["Payments","/payments"]]:"admin"==c?[["Dashboard","/admin"],["Users","/admin/users"],["Payments","/admin/payments"]]:[]),rightPages:i||[["Profile","/profile"]],user:null==a?void 0:a.email}),(0,r.jsx)("main",{className:"p-3",children:(0,r.jsx)("div",{children:n})})]})}},8063:function(e){"use strict";e.exports={gh_pages_config:{branch:"gh-pages",repo:"git@github.com:veehz/mcchub.git",message:"Auto-generated commit",nojekyll:!0,dotfiles:!0},genders:{male:"I am a Male",female:"I am a Female",undisclosed:"Other/I prefer not to disclose"},currency:"RM",registration_fee:20,bank_details:["Bank","Account Name","Number:1010101010"],links:[{href:"https://ioimalaysia.org/",name:"Malaysian Informatics and Programming Society (MIPS) Website"}],firebaseConfig:{apiKey:"AIzaSyC02WuJ5btg2A6iTeGwYi0IDzGKziODv2k",authDomain:"mcc-registration-test.firebaseapp.com",databaseURL:"https://mcc-registration-test-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"mcc-registration-test",storageBucket:"mcc-registration-test.appspot.com",messagingSenderId:"927692212307",appId:"1:927692212307:web:e3cd12ba84a9720b4b9ea6"}}},5696:function(e,t,n){"use strict";n.d(t,{I:function(){return c},db:function(){return o}});var r=n(3977),s=n(1259),i=n(1019),a=n(8063);let l=(0,r.ZF)(a.firebaseConfig),c=(0,s.v0)(l),o=(0,i.N8)(l)},7159:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}});var r=n(5893),s=n(8804),i=n(7312),a=n(5696),l=n(4023),c=n(1259),o=n(1019),d=n(1664),u=n.n(d),m=n(1163),h=n(7294);let f=e=>{let{nric:t,fetchStatus:n,children:i}=e,l=(0,h.useRef)(!1),[c,d]=(0,h.useState)(!0),[m,f]=(0,h.useState)(""),[x,g]=(0,h.useState)(!1),[b,p]=(0,h.useState)(!0);function v(){a.I.currentUser&&!1!==b&&(p(!1),(0,o.t8)((0,o.iH)(a.db,"nric/".concat(t,"/manager")),null),(0,o.t8)((0,o.iH)(a.db,"managedStudents/".concat(a.I.currentUser.uid,"/").concat(t)),null))}return(0,h.useEffect)(()=>{!1!==b&&!l.current&&(n||c)&&(l.current=!0,(0,o.jM)((0,o.iH)(a.db,"nric/"+t),e=>{var t;if(!e.exists()||e.val().manager!==(null===(t=a.I.currentUser)||void 0===t?void 0:t.uid)){v();return}if(void 0===e.val().student){f("Profile isn't bound. Please ask your student/child to create a student account and login to their account to bind their profile.");return}(0,o.jM)((0,o.iH)(a.db,"users/"+e.val().student),e=>{if(g(!0),!e.exists()||!e.val().dob||!e.val().name){f("Profile bound".concat(e.val().name?" to ".concat(e.val().name):"",", Profile isn't complete"));return}f("Profile complete, bound to ".concat(e.val().name))},e=>{console.error(e)})},e=>{console.error(e)}))},[n,c,t]),(0,r.jsxs)("div",{className:"rounded-lg overflow-hidden shadow-lg p-4 mb-4"+(b?"":" hidden"),onClick:()=>{d(!0)},children:[(0,r.jsx)("div",{className:"font-bold text-xl mb-2",children:t.split("-").join(" - ")}),(0,r.jsx)("div",{className:"text-gray-700 text-base mb-2",children:m}),(0,r.jsx)(u(),{href:"/students/edit?id=".concat(t),children:(0,r.jsx)(s.Z,{full:!0,className:x?"":"hidden",children:"Edit Profile"})}),(0,r.jsx)(s.Z,{full:!0,onClick:v,children:"Delete Student"})]})};function x(){let[e,t]=(0,h.useState)(!0),[n,o]=(0,h.useState)([]),d=(0,m.useRouter)();return(0,h.useEffect)(()=>{(0,c.Aj)(a.I,e=>{if(!e){d.push("/");return}(0,l.fG)(e.uid).then(e=>{e&&o(Object.keys(e))})})},[]),(0,r.jsxs)(i.Z,{title:"Students",children:[(0,r.jsxs)("div",{className:"flex flex-wrap",children:[(0,r.jsx)(u(),{href:"/students/add",children:(0,r.jsxs)(s.Z,{className:"mx-4 my-2 text-center",children:[(0,r.jsx)("span",{className:"font-extrabold",children:"+"}),"\xa0Add Student"]})}),(0,r.jsx)(s.Z,{className:"mx-4 my-2"+(e?" hidden":""),onClick:()=>t(!0),children:"Fetch All Student Status"})]}),(0,r.jsx)("div",{className:"flex flex-wrap",children:n.map(t=>(0,r.jsx)("div",{className:"w-72 p-4",children:(0,r.jsx)(f,{nric:t,fetchStatus:e})},t))})]})}},4023:function(e,t,n){"use strict";n.d(t,{M_:function(){return a},_P:function(){return d},cY:function(){return l},fG:function(){return c},fM:function(){return o},s_:function(){return u}});var r=n(5696),s=n(1019);async function i(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!e&&r.I.currentUser)return r.I.currentUser;try{return await new Promise((e,t)=>{let n=r.I.onAuthStateChanged(t=>{n(),e(t)},t)})}catch(e){throw console.error("Error fetching user from Firebase:",e),e}}async function a(e){let t=await i();return null===t?null:(e=e||t.uid,new Promise((t,n)=>{(0,s.jM)((0,s.iH)(r.db,"users/"+e),e=>{t(e.val())},e=>{console.error("Error fetching user details from Firebase:",e),n(e)})}))}async function l(e){let t=await i();return null===t?null:(e=e||t.uid,new Promise((t,n)=>{(0,s.jM)((0,s.iH)(r.db,"role/"+e),e=>{t(e.val())},e=>{console.error("Error fetching user role from Firebase:",e),n(e)})}))}async function c(e){let t=await i();return null===t?null:(e=e||t.uid,new Promise((t,n)=>{(0,s.jM)((0,s.iH)(r.db,"managedStudents/"+e+"/"),e=>{t(e.val())},e=>{console.error("Error fetching managed students from Firebase:",e),n(e)})}))}async function o(e){let t=await c(e);return null===t?0:Object.keys(t).length}async function d(e){let t=await i();return null===t?null:(e=e||t.uid,new Promise((t,n)=>{(0,s.jM)((0,s.iH)(r.db,"payments/"+e+"/"),e=>{t(e.val())},e=>{console.error("Error fetching payments from Firebase:",e),n(e)})}))}async function u(){return null===await i()?null:new Promise((e,t)=>{(0,s.jM)((0,s.iH)(r.db,"contestInfo"),t=>{e(t.val())},e=>{console.error("Error fetching contest info from Firebase:",e),t(e)})})}}},function(e){e.O(0,[627,257,414,888,774,179],function(){return e(e.s=9037)}),_N_E=e.O()}]);