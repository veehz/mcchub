"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[917],{8804:function(e,t,a){a.d(t,{Z:function(){return s}});var n=a(5893);function s(e){let{children:t,isLoading:a=!1,props:s={},className:i="",flex:r=!0,full:l=!1,disabled:d=!1,onClick:c}=e;return(0,n.jsxs)("button",{onClick:c,className:"group relative justify-center rounded-md px-3 py-2 text-sm font-semibold text-white hover:opacity-75 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 disabled:opacity-75 "+(i.includes("bg-")?"":"bg-indigo-600 ")+(l?"w-full ":"")+(r?"flex ":"")+i,disabled:a||d,...s,children:[(0,n.jsxs)("svg",{className:"animate-spin h-5 w-5 mr-3"+(a?"":" hidden"),viewBox:"0 0 24 24",children:[(0,n.jsx)("circle",{className:"opacity-25 fill-indigo-600",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,n.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),t]})}},7312:function(e,t,a){a.d(t,{Z:function(){return v}});var n=a(5893),s=a(1259),i=a(5675),r=a.n(i),l={src:"/mcchub/_next/static/media/mccWhite.370122d3.svg",height:50,width:407,blurWidth:0,blurHeight:0},d={src:"/mcchub/_next/static/media/mccWhiteSmall.429d837c.svg",height:48,width:147,blurWidth:0,blurHeight:0},c=a(1664),o=a.n(c),m=a(1163),u=a(7294);function h(e){let{pages:t=[],rightPages:a=[]}=e,s=(0,m.useRouter)();a.length&&"Sign Out"==a[a.length-1][0]||a.push(["Sign Out","/?signout=true"]);let[i,c]=(0,u.useState)(!1);return(0,n.jsx)("div",{children:(0,n.jsxs)("nav",{className:"bg-gray-800",children:[(0,n.jsx)("div",{className:"mx-auto max-w-7xl px-2 sm:px-6 lg:px-8",children:(0,n.jsxs)("div",{className:"relative flex h-16 items-center justify-between",children:[(0,n.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center md:hidden",children:(0,n.jsxs)("button",{type:"button",className:"inline-flex items-center justify-center rounded-md p-2 text-gray-400 hover:bg-gray-700 hover:text-white focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white","aria-controls":"mobile-menu","aria-expanded":"false",onClick:()=>c(!i),children:[(0,n.jsx)("span",{className:"sr-only",children:"Open main menu"}),(0,n.jsx)("svg",{className:"h-6 w-6 "+(i?"hidden":"block"),fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})}),(0,n.jsx)("svg",{className:"h-6 w-6 "+(i?"block":"hidden"),fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})]})}),(0,n.jsxs)("div",{className:"flex flex-1 items-center justify-center md:items-stretch md:justify-start",children:[(0,n.jsx)("div",{className:"flex flex-shrink-0 items-center",children:(0,n.jsxs)(o(),{href:"/dashboard",children:[(0,n.jsx)(r(),{className:"block h-8 w-auto sm:hidden",priority:!0,src:d,alt:"MCC Small Logo"}),(0,n.jsx)(r(),{className:"hidden h-8 w-auto sm:block",priority:!0,src:l,alt:"MCC Logo"})]})}),(0,n.jsx)("div",{className:"hidden md:ml-6 md:block w-full",children:(0,n.jsxs)("div",{className:"flex",children:[t.map((e,t)=>{let[a,i]=e;return(0,n.jsx)(o(),{href:i,className:(s.pathname==i?"bg-gray-900 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white")+" rounded-md px-3 py-2 text-sm font-medium"+(0==t?" ml-0":" ml-2"),"aria-current":s.pathname==i?"page":void 0,children:a},t)}),(0,n.jsx)("div",{className:"flex-auto"}),a.map((e,t)=>{let[a,i]=e;return(0,n.jsx)(o(),{href:i,className:(s.pathname==i?"bg-gray-900 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white")+" rounded-md px-3 py-2 text-sm font-medium"+(0==t?" ml-0":" ml-2"),"aria-current":s.pathname==i?"page":void 0,children:a},t)})]})})]})]})}),(0,n.jsx)("div",{className:"md:hidden"+(i?"":" hidden"),id:"mobile-menu",children:(0,n.jsx)("div",{className:"space-y-1 px-2 pb-3 pt-2",children:[...t,...a].map((e,t)=>{let[a,i]=e;return(0,n.jsx)(o(),{href:i,className:(s.pathname==i?"bg-gray-900 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white")+" block rounded-md px-3 py-2 text-base font-medium","aria-current":s.pathname==i?"page":void 0,children:a},t)})})})]})})}var p=a(5696),x=a(1019),f=a(9008),g=a.n(f);function v(e){let{title:t,children:a,pages:i,rightPages:r}=e,[l,d]=(0,u.useState)(void 0),[c,o]=(0,u.useState)(""),f=(0,m.useRouter)();return(0,u.useEffect)(()=>{(0,s.Aj)(p.I,e=>{if(!e){f.push("/");return}d(e),(0,x.jM)((0,x.iH)(p.db,"role/".concat(e.uid)),e=>{o(e.val()),f.pathname.startsWith("/admin")&&"admin"!=e.val()&&f.push("/")},{onlyOnce:!0})})},[f]),(0,n.jsxs)("div",{children:[(0,n.jsx)(g(),{children:(0,n.jsx)("title",{lang:"en",children:t?"".concat(t," | MCC Hub"):"MCC Hub"},"title")}),(0,n.jsx)(h,{pages:i||("student"==c?[["Dashboard","/dashboard"]]:"teacher"==c||"parent"==c?[["Dashboard","/dashboard"],["Students","/students"],["Payments","/payments"]]:[["Dashboard","/admin"],["Users","/admin/users"],["Payments","/admin/payments"]]),rightPages:r||[["Profile","/profile"]],user:null==l?void 0:l.email}),(0,n.jsx)("main",{className:"p-3",children:(0,n.jsx)("div",{children:a})})]})}},8063:function(e){e.exports={gh_pages_config:{branch:"gh-pages",repo:"git@github.com:veehz/mcchub.git",message:"Auto-generated commit",nojekyll:!0,dotfiles:!0},genders:{male:"I am a Male",female:"I am a Female",undisclosed:"Other/I prefer not to disclose"},currency:"RM",registration_fee:20,bank_details:["Bank","Account Name","Number:1010101010"],links:[{href:"https://ioimalaysia.org/",name:"Malaysian Informatics and Programming Society (MIPS) Website"}],firebaseConfig:{apiKey:"AIzaSyC02WuJ5btg2A6iTeGwYi0IDzGKziODv2k",authDomain:"mcc-registration-test.firebaseapp.com",databaseURL:"https://mcc-registration-test-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"mcc-registration-test",storageBucket:"mcc-registration-test.appspot.com",messagingSenderId:"927692212307",appId:"1:927692212307:web:e3cd12ba84a9720b4b9ea6"}}},5696:function(e,t,a){a.d(t,{I:function(){return d},db:function(){return c}});var n=a(3977),s=a(1259),i=a(1019),r=a(8063);let l=(0,n.ZF)(r.firebaseConfig),d=(0,s.v0)(l),c=(0,i.N8)(l)},8917:function(e,t,a){a.r(t),a.d(t,{PaymentCard:function(){return u},default:function(){return h}});var n=a(5893),s=a(8804),i=a(7312),r=a(8063),l=a.n(r),d=a(5696),c=a(1019),o=a(6650),m=a(7294);let u=e=>{var t;let{payment:a,showUid:i=!0}=e,{userId:r,paymentId:u}=a,h=(null==a?void 0:null===(t=a.approved)||void 0===t?void 0:t.status)||"pending",[p,x]=(0,m.useState)(null),[f,g]=(0,m.useState)(!1),[v,b]=(0,m.useState)(!1);async function y(e){g(!0);try{await (0,c.t8)((0,c.iH)(d.db,"payments/".concat(r,"/").concat(u,"/approved")),{status:e,by:d.I.currentUser.uid})}catch(e){}g(!1)}return(0,n.jsxs)("div",{className:"rounded-lg overflow-hidden shadow-lg p-4 mb-4 w-full",children:[(0,n.jsxs)("div",{className:"font-bold text-xl mb-2",children:[i?"".concat(r,": "):null," #",u]}),(0,n.jsxs)("div",{className:"text-gray-700 text-base mb-2",children:["Payment of: ",l().currency,null==a?void 0:a.amount," "]}),(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsxs)(s.Z,{className:"mx-2 my-1",onClick:()=>{let e=(0,o.cF)();p||(0,o.Jt)((0,o.iH)(e,"paymentProof/".concat(r,"/").concat(u,"-").concat(a.uniqueId,".").concat(a.fileExtension))).then(e=>{x(e)}),b(!v)},children:[v?"Hide":"View"," Payment Proof"]}),(0,n.jsx)(s.Z,{className:"mx-2 my-1",onClick:()=>{let e=(0,o.cF)();(0,o.Jt)((0,o.iH)(e,"paymentProof/".concat(r,"/").concat(u,"-").concat(a.uniqueId,".").concat(a.fileExtension))).then(e=>{window.open(e,"_blank")})},children:"Download Payment Proof"}),"approved"==h||(0,n.jsx)(s.Z,{className:"mx-2 my-1 bg-green-500",onClick:()=>y("approved"),isLoading:f,children:"Approve Payment"}),"pending"==h||(0,n.jsx)(s.Z,{className:"mx-2 my-1 bg-yellow-500",onClick:()=>y("pending"),isLoading:f,children:"Set Payment as Pending"}),"rejected"==h||(0,n.jsx)(s.Z,{className:"mx-2 my-1 bg-red-500",onClick:()=>y("rejected"),isLoading:f,children:"Reject Payment"})]}),(0,n.jsx)("div",{className:"my-4",children:p&&v?(0,n.jsx)("iframe",{src:p,width:"100%",height:"500px"}):null})]})};function h(){var e;let[t,a]=(0,m.useState)({});(0,m.useEffect)(()=>{(0,c.jM)((0,c.iH)(d.db,"payments"),e=>{let t={approved:[],pending:[],rejected:[]};if(!e.val())return t;for(let a in e.val())for(let s in e.val()[a]){var n;let i=e.val()[a][s];(null==i?void 0:null===(n=i.approved)||void 0===n?void 0:n.status)?t[i.approved.status].push({...i,userId:a,paymentId:s}):t.pending.push({...i,userId:a,paymentId:s})}a(t)})},[]);let[r,l]=(0,m.useState)("");return(0,n.jsx)(i.Z,{title:"Payments",children:(0,n.jsxs)("div",{className:"flex flex-col md:flex-row md:flex-wrap",children:[(0,n.jsx)(s.Z,{className:"md:w-fit md:mx-2 my-2",onClick:()=>l("approved"),children:"Show Approved Payments"}),(0,n.jsx)(s.Z,{className:"md:w-fit md:mx-2 my-2",onClick:()=>l("pending"),children:"Show Pending Approval Payments"}),(0,n.jsx)(s.Z,{className:"md:w-fit md:mx-2 my-2",onClick:()=>l("rejected"),children:"Show Rejected Payments"}),r?null===(e=t[r])||void 0===e?void 0:e.map(e=>{let{userId:t,paymentId:a}=e;return(0,n.jsx)(u,{payment:e},t+"-"+a)}):null]})})}}}]);